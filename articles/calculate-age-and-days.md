---
title: "ç”Ÿå¹´æœˆæ—¥ã‹ã‚‰ã€å¹´é½¢ã¨çµŒéæ—¥æ•°ã‚’ç®—å‡º" # è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«
emoji: "ğŸ‚" # ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒã¨ã—ã¦ä½¿ã‚ã‚Œã‚‹çµµæ–‡å­—ï¼ˆ1æ–‡å­—ã ã‘ï¼‰
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢è¨˜äº‹
topics: ["javascript"] # ã‚¿ã‚°ã€‚["markdown", "rust", "aws"]ã®ã‚ˆã†ã«æŒ‡å®šã™ã‚‹
published: true # å…¬é–‹è¨­å®šï¼ˆfalseã«ã™ã‚‹ã¨ä¸‹æ›¸ãï¼‰
---

## ã¯ã˜ã‚ã«

æœ¬è¨˜äº‹ã§ã¯ã€Œ**ç”Ÿå¹´æœˆæ—¥ã‹ã‚‰ã€å¹´é½¢ã¨çµŒéæ—¥æ•°ã‚’ç®—å‡ºã™ã‚‹**ã€ã“ã¨ã‚’ç›®çš„ã¨ã—ã€ãã®å®Ÿè£…ã‚’è€ƒãˆã¦ã„ãã¾ã™ã€‚

ãªãŠ æœ¬è¨˜äº‹ã§æ‰±ã£ãŸå†…å®¹ã¯ã€ä¸‹è¨˜å ´æ‰€ã«ã¦ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

https://nonaka101.github.io/jig-a/

## äº‹å‰æº–å‚™

ã“ã“ã§ã¯è¨­è¨ˆã‚’å§‹ã‚ã‚‹å‰æ®µéšã¨ã—ã¦ã€ç›®çš„ã‚„æ¡ä»¶ç­‰ã‚’è€ƒãˆã¦ã„ãã¾ã™ã€‚

### ç’°å¢ƒã®å®šç¾©

æœ¬è¨˜äº‹ã§ã¯ JavaScript ã‚’ä½¿ã£ã¦å‡¦ç†ã—ã¦ã„ãã¾ã™ã€‚

:::message

æœ¬è¨˜äº‹ã§ã¯ `Date` å‹ã‚’ä½¿ã„ã¾ã™ãŒã€**ä¸‹è¨˜ã®æ©Ÿèƒ½ã‚’å®Ÿè£…ã§ãã‚Œã°ã€ä»–è¨€èªã§ã‚‚åŒã˜ã“ã¨ãŒã§ãã¾ã™**ã€‚

- `å¹´`, `æœˆ`, `æ—¥`, `æ™‚é–“` ã®æƒ…å ±ã‚’æŒã¡ã€å–å¾—ãƒ»è¨­å®šã§ãã‚‹
- æœˆã®æœ«æ—¥ï¼ˆä¾‹ãˆã° 8æœˆã¯ **31**æ—¥ã§ã€9æœˆã¯ **30**æ—¥ï¼‰ã‚„ã€é–æ—¥ãªã©ãŒè€ƒæ…®ã•ã‚Œã¦ã„ã‚‹
  - å®Ÿåœ¨ã—ãªã„æ—¥ä»˜ã¯ã€ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆãƒ»ãƒ‡ã‚¯ãƒªãƒ¡ãƒ³ãƒˆå‡¦ç†ã—ã‚Œãã‚Œã‚‹ã¨è‰¯ã„ï¼ˆä¾‹ï¼š8æœˆ0æ—¥ã¯7æœˆ31æ—¥ã«ã€8æœˆ32æ—¥ã¯9æœˆ1æ—¥ã«ï¼‰
- æ—¥ä»˜ãƒ‡ãƒ¼ã‚¿ã‚’æ•°å€¤åŒ–ã§ãã‚‹ï¼ˆä¾‹ï¼šUNIXã‚¨ãƒãƒƒã‚¯ã‹ã‚‰ã®çµŒéç§’æ•°ï¼‰
  - æ•°å€¤ã‹ã‚‰ã®æ—¥æ•°æ›ç®—ãŒã§ãã‚‹
  - æ—¥ä»˜åŒå£«ã®å¤§å°æ¯”è¼ƒãŒã§ãã‚‹

:::

### ç›®çš„ã¨ç®—å‡ºæ™‚ã®æ¡ä»¶

æœ¬è¨˜äº‹ã®ç›®çš„ã¯ã€Œ**ç”Ÿå¹´æœˆæ—¥ã‹ã‚‰ã€å¹´é½¢ã¨çµŒéæ—¥æ•°ã‚’ç®—å‡ºã™ã‚‹**ã€ã§ã™ã€‚ã“ã‚Œã‚’ã‚‚ã†å°‘ã—å…·ä½“åŒ–ã—ã€ä¸‹è¨˜ã®ã‚ˆã†ã«å®šç¾©ã—ã¾ã™ã€‚

- ç”Ÿå¹´æœˆæ—¥ã‚’ã€**`yyyy-MM-dd` å½¢å¼ã®æ–‡å­—åˆ—** ã§å—ã‘å–ã‚‹
- ä»Šæ—¥ã®æ—¥ä»˜ã‹ã‚‰ã€ãã®äººã®**æº€å¹´é½¢**ã¨**ãã“ã‹ã‚‰ã®çµŒéæ—¥æ•°**ã‚’è¨ˆç®—ã™ã‚‹

ãã—ã¦ç®—å‡ºã®éš›ã¯ã€ä¸‹è¨˜ã®æ¡ä»¶ã‚’æº€ãŸã•ãªã‘ã‚Œã°ãªã‚‰ãªã„ã‚‚ã®ã¨ã—ã¾ã™ã€‚

#### é–å¹´ã«å¯¾å¿œã™ã‚‹

ä¾‹ãˆã°ã€é–æ—¥ã§ã‚ã‚‹ 2000å¹´2æœˆ29æ—¥ç”Ÿã¾ã‚Œã®äººã¯ 4 å¹´ã« 1 å›ã—ã‹æ­³ã‚’å–ã‚‰ãªã„ã€ã¨ã„ã†çŠ¶æ³ã¯é¿ã‘ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

#### åŠ é½¢ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯ã€èª•ç”Ÿæ—¥å‰æ—¥ã® 24 æ™‚ã¨ã™ã‚‹

è¨ˆç®—ã¯ [ã€å¹´é½¢è¨ˆç®—ãƒ‹é–¢ã‚¹ãƒ«æ³•å¾‹ | e-Gov æ³•ä»¤æ¤œç´¢ã€](https://laws.e-gov.go.jp/law/135AC1000000050) ã«åŸºã¥ãã€æ™‚åˆ»ã‚’å˜ä½ã¨ã™ã‚‹æ–¹å¼ã§è¡Œã†ã‚‚ã®ã¨ã—ã¾ã™ã€‚

#### 1æ—¥ã«é”ã—ãªã„çµŒéæ—¥æ•°ã¯åˆ‡ã‚Šæ¨ã¦ã‚‹

çµŒéæ—¥æ•°ã¯ã€ç¾å¹´é½¢ã¨ãªã‚‹åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‹ã‚‰çµŒéã—ãŸæ—¥æ•°ã‚’æ„å‘³ã—ã¾ã™ã€‚1æ—¥åˆ†ã«é”ã—ãªã„æ™‚é–“ã¯åˆ‡ã‚Šæ¨ã¦ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚  
ãªãŠã€çµŒéæ—¥æ•°ã®æœ€å°å€¤ã¯ `0`ï¼ˆèª•ç”Ÿæ—¥å½“æ—¥ã®å ´åˆï¼‰ã€æœ€å¤§å€¤ã¯ `365`ï¼ˆèª•ç”Ÿæ—¥å‰æ—¥ã§ã€ãã®å¹´ãŒé–å¹´ã®å ´åˆï¼‰ã¨ãªã‚Šã¾ã™ã€‚

:::details çµŒéã€Œæœˆã€æ•°ã«ã¤ã„ã¦

ä¸€éƒ¨ã®æ›¸é¡ã«ã¯ã€Œâ—¯æ­³â—¯ãƒ¶æœˆã€ã¨æ›¸ãæ¬„ãŒã‚ã£ãŸã‚Šã¨ã€æœˆæ•°ç®—å‡ºã«ã¯éœ€è¦ãŒã‚ã‚Šã¾ã™ã€‚

æœ¬è¨˜äº‹ã«ãŠã„ã¦ã¯ã€**å®Ÿè£…ã®é›£æ˜“åº¦**ï¼ˆæœˆã«å¿œã˜ã¦æœ«æ—¥ãŒãƒãƒ©ãƒãƒ©ãªä¸­ã§ ã©ã†è¨ˆç®—ã™ã¹ãã‹ã€ãªã©ï¼‰ã‚„**å¾—ã‚‰ã‚Œã‚‹ãƒ¡ãƒªãƒƒãƒˆã¨ã®æ¯”è¼ƒè¡¡é‡**ï¼ˆæ—¥æ•°ãªã‚‰ã€æ¦‚ç®—ã§ã‚‚æœˆæ•°ã‚’å®¹æ˜“ã«å‡ºã›ã‚‹ï¼‰ã‹ã‚‰ã€é›£åº¦ãŒä½ãæ˜ç¢ºãªã€Œæ—¥æ•°ã€ã§ã®ç®—å‡ºã«ã—ã¾ã—ãŸã€‚

:::

## è¨­è¨ˆ

ã“ã“ã‹ã‚‰ã¯[äº‹å‰æº–å‚™](#äº‹å‰æº–å‚™)ã®å†…å®¹ã‹ã‚‰ã€ä»•çµ„ã¿ã‚’è€ƒãˆã¦ã„ãã¾ã™ã€‚

### åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«ã¤ã„ã¦

![2000å¹´8æœˆ1æ—¥ã‚’ç”Ÿå¹´æœˆæ—¥ã¨ã™ã‚‹ã€2024å¹´8æœˆ25æ—¥ã¾ã§ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒãƒ£ãƒ¼ãƒˆã€‚å„å¹´ã®7æœˆ31æ—¥24æ™‚ãŒåŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¨ãªã£ã¦ã„ã‚‹](/images/articles/calculate-age-and-days/calcdate-00.png)

ã¾ãšã¯ã€**ã©ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§æ­³ã‚’å–ã‚‹ã‹**ã‚’è€ƒãˆã¾ã™ã€‚ã€Œèª•ç”Ÿæ—¥å½“æ—¥ã® 0 æ™‚ã€ã ã¨ã€é–æ—¥ç”Ÿã¾ã‚Œã¯ 4 å¹´ã« 1 åº¦ã—ã‹æ­³ã‚’å–ã‚‰ãªã„ã“ã¨ã«ãªã‚Šã‹ã­ã¾ã›ã‚“ã€‚

ã¾ãŸï¼ˆæ¦‚ç®—å€¤ãªã‚‰ã¨ã‚‚ã‹ãï¼‰ã€Œç”Ÿå¹´æœˆæ—¥ã‹ã‚‰365æ—¥ãšã¤å›ã—ã¦ç®—å‡ºã™ã‚‹ã€ã¨ã„ã†æ‰‹æ³•ã‚‚é©åˆ‡ã§ãªã„ã§ã—ã‚‡ã†ã€‚é–å¹´ã«ã‚ˆã‚Š1å¹´ã®æ—¥æ•°ã¯å¤‰ã‚ã‚Šã¾ã™ã—ã€ä»Šå›ã¯çµŒéæ—¥æ•°ã‚‚å¿…è¦ã¨ãªã‚‹ã®ã§ï¼ˆã‚ã‚‹ç¨‹åº¦ã®ï¼‰ç²¾åº¦ã‚’æŒã¤å€¤ãŒå¿…è¦ã¨ãªã‚Šã¾ã™ã€‚

ãã“ã§ã€[ã€å¹´é½¢è¨ˆç®—ãƒ‹é–¢ã‚¹ãƒ«æ³•å¾‹ | e-Gov æ³•ä»¤æ¤œç´¢ã€](https://laws.e-gov.go.jp/law/135AC1000000050)ã«ã‚ã‚‹ã‚ˆã†ã«ã€åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯**èª•ç”Ÿæ—¥å‰æ—¥ã®24æ™‚**ã¨ã„ã†è€ƒãˆæ–¹ã‚’ä½¿ã„ã¾ã™ã€‚

ã“ã®å ´åˆã€é–æ—¥å‰å¾Œã®ç”Ÿã¾ã‚Œã¯ä¸‹è¡¨ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

|èª•ç”Ÿæ—¥|åŠ é½¢æ™‚ç‚¹ï¼šé–å¹´ã§ãªã„å ´åˆ|åŠ é½¢æ™‚ç‚¹ï¼šé–å¹´ã®å ´åˆ|
|:---:|:---|:---|
| 2æœˆ29æ—¥ | 2æœˆ28æ—¥ 24:00ï¼ˆ3æœˆ1æ—¥ 0:00ï¼‰ | 2æœˆ28æ—¥ 24:00ï¼ˆ2æœˆ29æ—¥ 0:00ï¼‰ |
| 3æœˆ1æ—¥  | 2æœˆ28æ—¥ 24:00ï¼ˆ3æœˆ1æ—¥ 0:00ï¼‰ | 2æœˆ29æ—¥ 24:00ï¼ˆ3æœˆ1æ—¥ 0:00ï¼‰ |

### æº€å¹´é½¢ã«ã¤ã„ã¦

![ä¸Šå›³ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒãƒ£ãƒ¼ãƒˆã®ã€åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«ç€ç›®ã—ãŸå›³](/images/articles/calculate-age-and-days/calcdate-01.png)

å¹´é½¢ã¯ã€å˜ç´”ã«ã€Œ**ä»Šã®å¹´æ•°** - **ç”Ÿã¾ã‚ŒãŸå¹´æ•°**ã€ã‹ã‚‰å‡ºã—ã¾ã™ã€‚ãŸã ã— ä»Šå¹´ã¾ã èª•ç”Ÿæ—¥ã‚’è¿ãˆã¦ã„ãªã„ï¼ˆâ‰’ åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è¶Šãˆã¦ã„ãªã„ï¼‰å ´åˆã€**ãã“ã‹ã‚‰ 1 ã‚’å¼•ã**ã“ã¨ã§èª¿æ•´ã—ã¾ã™ã€‚

### çµŒéæ—¥æ•°ã«ã¤ã„ã¦

![ä¸Šå›³ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒãƒ£ãƒ¼ãƒˆã®ã€ä»Šå¹´ã®åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‹ã‚‰ä»Šæ—¥ã¾ã§ã®æœŸé–“ã«ç€ç›®ã—ãŸå›³](/images/articles/calculate-age-and-days/calcdate-02.png)

çµŒéæ—¥æ•°ã¯ã€ã€Œç¾å¹´é½¢ã¨ãªã‚‹åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‹ã‚‰çµŒéã—ãŸæ—¥æ•°ã€ã®ã“ã¨ã§ã™ã€‚ãã®ãŸã‚ã«ã¯ã€**ç¾å¹´é½¢ã¨ãªã‚‹åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°**ãŒå¿…è¦ã§ã™ã€‚  
ã“ã‚Œã¯ã€**æœˆæ•°**ã¨**æ—¥æ•°**ã¯ç”Ÿå¹´æœˆæ—¥ã®æƒ…å ±ã‚’ãã®ã¾ã¾ä½¿ã„ã€**å¹´æ•°**ã«ã¤ã„ã¦ã¯ ç”Ÿã¾ã‚ŒãŸå¹´æ•°ã¨[å…ˆç¨‹ã®æº€å¹´é½¢](#æº€å¹´é½¢ã«ã¤ã„ã¦)ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ä½œæˆã§ãã¾ã™ã€‚

ã“ã‚Œã‚’åŸºã« ä»Šæ—¥ã¨ã®æœŸé–“ã‚’æ•°å€¤åŒ–ã§ãã‚Œã°ã€çµŒéæ—¥æ•°ã‚’ç®—å‡ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## ä½œæˆ

ã“ã“ã‹ã‚‰ã¯ã€[è¨­è¨ˆ](#è¨­è¨ˆ)ã§è€ƒãˆãŸå†…å®¹ã‹ã‚‰ã€JavaScript ã§ã‚³ãƒ¼ãƒ‰åŒ–ã—ã¦ã„ãã¾ã™ã€‚

æµã‚Œã¨ã—ã¦ã¯ã€ä¸‹è¨˜ã®3ã¤ã‚’é–¢æ•°ã¨ã—ã¦ä½œã‚Šã€ãã‚Œã‚‰ã‚’çµ„ã¿åˆã‚ã›ã¦[ç›®çš„ã®å‡¦ç†](#ç”Ÿå¹´æœˆæ—¥ã‹ã‚‰å¹´é½¢ã¨çµŒéæ—¥æ•°ã‚’ç®—å‡º)ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

1. [æº€å¹´é½¢ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°](#æº€å¹´é½¢ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°)
2. [æœŸé–“ã®æ—¥æ•°ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°](#æœŸé–“ã®æ—¥æ•°ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°)
3. [æ—¥ä»˜æ–‡å­—åˆ—ã‚’åˆ¤å®šã™ã‚‹é–¢æ•°](#æ—¥ä»˜æ–‡å­—åˆ—ã‚’åˆ¤å®šã™ã‚‹é–¢æ•°)

### æº€å¹´é½¢ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°

[æº€å¹´é½¢ã«ã¤ã„ã¦](#æº€å¹´é½¢ã«ã¤ã„ã¦)ã§è€ƒãˆãŸå†…å®¹ã‚’ã€ã‚³ãƒ¼ãƒ‰ã«èµ·ã“ã—ã¾ã™ã€‚

é–¢æ•°åã¯ `calcAge` ã¨ã—ã€å¿…è¦ãªå¼•æ•°ã¨ã—ã¦2ã¤ã‚’è¨­å®šã—ã¾ã™ã€‚

1. ç”Ÿå¹´æœˆæ—¥ï¼ˆ`Date` å‹ï¼‰
2. è¨ˆç®—ã®åŸºæº–æ—¥ï¼ˆ`Date` å‹ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¨ã—ã¦ä»Šæ—¥ã®æ—¥ä»˜ï¼‰

```javascript:é–¢æ•°åã¨å¼•æ•°ã‚’è¨­å®š
function calcAge(dateBirth, dateBase = new Date()){
  // æ—¥ä»˜ã‹ã‚‰æº€å¹´é½¢ã‚’è¨ˆç®—ã—ã€è¿”ã™
}
```

#### å¹´é½¢è¨ˆç®—ã¨äº‹å‰ãƒã‚§ãƒƒã‚¯

ã¾ãšã¯ã€å¼•æ•°ã¨ãªã‚‹ `dateBirth`, `dateBase` ãŒ `Date` å‹ã‹ã‚’ç¢ºã‹ã‚ã¾ã™ã€‚

ãã—ã¦ãã®å¾Œã€ãã‚Œãã‚Œã®å¹´æ•°ã‚’æŠœãå‡ºã—ã€å¹´é½¢ã‚’ç®—å‡ºã—ã¾ã™ã€‚

```javascript:äº‹å‰ãƒã‚§ãƒƒã‚¯ã‚’ã—ã¦ã€å¹´é½¢ã‚’è¨ˆç®—
function calcAge(dateBirth, dateBase = new Date()){
  // å‹ãƒã‚§ãƒƒã‚¯
  if(!(dateBirth instanceof Date && dateBase instanceof Date)) throw new Error('å¼•æ•°ã¯ Date å‹ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“');

  const age = dateBase.getFullYear() - dateBirth.getFullYear();
}
```

#### åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’åˆ¤å®šã—ã€æº€å¹´é½¢ã‚’è¿”ã™

å…ˆã»ã©ç®—å‡ºã—ãŸå¹´é½¢ã¯ã€ä»Šå¹´ã®èª•ç”Ÿæ—¥ã‚’æ—¢ã«çµ‚ãˆã¦ã„ã‚‹å ´åˆã§ã™ã€‚ã¾ã ã®å ´åˆã¯ 1 ã¤å¼•ã„ãŸå€¤ãŒå¹´é½¢ã¨ãªã‚Šã¾ã™ã€‚

ãã®ãŸã‚ã«ã¯ã€ä»Šå¹´ã®åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’ç®—å‡ºã—ã€ãã‚Œã‚’è¶Šãˆã¦ã„ã‚‹ã‹ã‚’åˆ¤å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```javascript:åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‹ã‚‰ã€å¹´é½¢ã‚’èª¿æ•´ã—ã¦è¿”ã™
function calcAge(dateBirth, dateBase = new Date()){
  // å‹ãƒã‚§ãƒƒã‚¯
  if(!(dateBirth instanceof Date && dateBase instanceof Date)) throw new Error('å¼•æ•°ã¯ Date å‹ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“');

  const age = dateBase.getFullYear() - dateBirth.getFullYear();

  // åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼ˆè¨ˆç®—åŸºæº–å¹´ï¼‰ã¯ã€èª•ç”Ÿæ—¥ã®å‰æ—¥24æ™‚
  const timeBoundaryForAging = new Date(
    dateBase.getFullYear(),
    dateBirth.getMonth(),
    dateBirth.getDate() - 1,
    24
  );

  // æº€å¹´é½¢ã¯ã€åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’ ã¾ã è¶Šãˆã¦ã„ãªã„å ´åˆã€ãƒ‡ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã—ã¦è¿”ã™
  if(timeBoundaryForAging > dateBase){
    return age - 1;
  } else {
    return age;
  }
}
```

### æœŸé–“ã®æ—¥æ•°ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°

[çµŒéæ—¥æ•°ã«ã¤ã„ã¦](#çµŒéæ—¥æ•°ã«ã¤ã„ã¦)ã§è€ƒãˆãŸå†…å®¹ã‚’ã€ã‚³ãƒ¼ãƒ‰ã«èµ·ã“ã—ã¾ã™ã€‚ã“ã“ã§ã¯ã€2ç‚¹ã®æ—¥ä»˜ãƒ‡ãƒ¼ã‚¿ã®é–“ã«ã‚ã‚‹æœŸé–“ï¼ˆæ—¥æ•°å˜ä½ï¼‰ã‚’ç®—å‡ºã™ã‚‹é–¢æ•°ã‚’ä½œã£ã¦ã„ãã¾ã™ã€‚

é–¢æ•°åã¯ `dateDiff` ã¨ã—ã€å¿…è¦ãªå¼•æ•°ã¨ã—ã¦2ã¤ã‚’è¨­å®šã—ã¾ã™ã€‚

1. æ—¥ä»˜Aï¼ˆ`Date` å‹ï¼‰
2. æ—¥ä»˜Bï¼ˆ`Date` å‹ï¼‰

```javascript:é–¢æ•°åã¨å¼•æ•°ã‚’è¨­å®š
function dateDiff(date1, date2) {
  // 2ã¤ã®æœŸé–“ï¼ˆãƒŸãƒªç§’å˜ä½ï¼‰ã‚’æ±‚ã‚ã€æ—¥æ•°å˜ä½ã«ã—ã¦è¿”ã™
}
```

#### æœŸé–“ã‚’æ•°å€¤åŒ–ã—ã€æ—¥æ•°å˜ä½ã«ã—ã¦è¿”ã™

ã¾ãšã¯ `calcAge()` åŒæ§˜ã€å—ã‘å–ã‚‹å¼•æ•° `date1`, `date2` ã®å‹ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã„ã¾ã™ã€‚

```javascript:å¼•æ•°ãŒDateå‹ã‹ãƒã‚§ãƒƒã‚¯
function dateDiff(date1, date2) {
  // å‹ãƒã‚§ãƒƒã‚¯
  if(!(date1 instanceof Date && date2 instanceof Date)) throw new Error('å¼•æ•°ã¯ Date å‹ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“');
}
```

ãã®å¾Œ å„æ—¥ä»˜ã‚’æ•°å€¤åŒ–ï¼ˆJavaScript ã®å ´åˆã¯ ECMAScript å…ƒæœŸã‹ã‚‰ã®çµŒéãƒŸãƒªç§’æ•°ï¼‰ã—ã€å·®åˆ†ã‹ã‚‰æœŸé–“ã‚’æ±‚ã‚ã¾ã™ã€‚  
ã“ã®æ™‚ã€`date1`, `date2` ã®é †ç•ªã«ã‚ˆã£ã¦ã¯ãƒã‚¤ãƒŠã‚¹ã«ãªã‚Šã‹ã­ã¾ã›ã‚“ã®ã§ã€çµ¶å¯¾å€¤åŒ–ã—ã¦ãŠãã¾ã™ã€‚

```javascript:æœŸé–“ã‚’æ•°å€¤åŒ–ã™ã‚‹
function dateDiff(date1, date2) {
  // å‹ãƒã‚§ãƒƒã‚¯
  if(!(date1 instanceof Date && date2 instanceof Date)) throw new Error('å¼•æ•°ã¯ Date å‹ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“');

  // ãƒŸãƒªç§’å˜ä½ã§ã®æœŸé–“ã‚’æ±‚ã‚ã€æ—¥æ•°å˜ä½ã«ã—ã¦è¿”ã™
  const ms = Math.abs(date1.getTime() - date2.getTime());
}
```

æœ€å¾Œã«ã€JavaScript ã§ã¯å…ˆç¨‹ã®æœŸé–“ã¯ãƒŸãƒªç§’å˜ä½ã¨ãªã£ã¦ã„ã‚‹ã®ã§ã€ãã‚Œã‚’æ—¥æ•°æ›ç®—ï¼ˆâ€»ï¼‰ã«ã—ã¦è¿”ã—ã¾ã™ã€‚  
ï¼ˆâ€» `Math.floor()` ã‚’ä½¿ã„ã€1æ—¥ã«æº€ãŸãªã„éƒ¨åˆ†ã¯åˆ‡ã‚Šæ¨ã¦ã‚‹å½¢ã§æ•´æ•°åŒ–ã—ã¾ã™ï¼‰

```javascript:æ•°å€¤åŒ–ã—ãŸæœŸé–“ã‹ã‚‰ã€æ—¥æ•°å˜ä½ã«ã—ã¦è¿”ã™
function dateDiff(date1, date2) {
  // å‹ãƒã‚§ãƒƒã‚¯
  if(!(date1 instanceof Date && date2 instanceof Date)) throw new Error('å¼•æ•°ã¯ Date å‹ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“');

  // ãƒŸãƒªç§’å˜ä½ã§ã®æœŸé–“ã‚’æ±‚ã‚ã€æ—¥æ•°å˜ä½ã«ã—ã¦è¿”ã™
  const ms = Math.abs(date1.getTime() - date2.getTime());
  return Math.floor(ms / (1000 * 60 * 60 * 24));
}
```

### æ—¥ä»˜æ–‡å­—åˆ—ã‚’åˆ¤å®šã™ã‚‹é–¢æ•°

ã“ã“ã§ã¯[ç›®çš„ã¨ç®—å‡ºæ™‚ã®æ¡ä»¶](#ç›®çš„ã¨ç®—å‡ºæ™‚ã®æ¡ä»¶)ã§æ±ºã‚ãŸã€ `yyyy-MM-dd` å½¢å¼ã§å…¥åŠ›ã•ã‚Œã‚‹æ–‡å­—åˆ—ãŒã€æ—¥ä»˜ã¨ã—ã¦é©æ­£ãªã®ã‹ã‚’æ¤œè¨¼ã™ã‚‹é–¢æ•°ã‚’ä½œæˆã—ã¾ã™ã€‚

é–¢æ•°åã¯ `isDateFormat` ã¨ã—ã€å¿…è¦ãªå¼•æ•°ã¯ `yyyy-MM-dd` å½¢å¼ã®æ–‡å­—åˆ— 1 ã¤ã¨ã—ã¾ã™ã€‚

```javascript:é–¢æ•°åã¨å¼•æ•°ã‚’è¨­å®š
function isDateFormat(dateString) {
  // æ–‡å­—åˆ—ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€é©æ­£ãªæ—¥ä»˜æ–‡å­—åˆ—ã‹ã‚’åˆ¤å®šã™ã‚‹
}
```

æ¤œè¨¼ã¯ä¸‹è¨˜ã® 3 æ®µéšã«åˆ†ã‘ã¦è¡Œã„ã¾ã™ã€‚æº€ãŸã•ãªã‘ã‚Œã°ãã®æ™‚ç‚¹ã§ `false` ã§å¼¾ãã€æœ€å¾Œã¾ã§æº€ãŸã›ã° `true` ã‚’è¿”ã—ã¾ã™ã€‚

1. å½¢å¼ãƒã‚§ãƒƒã‚¯ï¼ˆæ•°å€¤ã§ `0000-00-00` ã®ã‚ˆã†ãªå½¢å¼ã‹ï¼‰
2. æœˆæ—¥ã®å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯ï¼ˆæœˆã¯1ã€œ12ã®ç¯„å›²å†…ã‹ã€æ—¥ã¯1ã€œ31ã®ç¯„å›²å†…ã‹ï¼‰
3. `Date` å‹ã«ã‚ˆã‚‹å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯ï¼ˆæš¦ä¸Šå­˜åœ¨ã—å¾—ãªã„æ—¥ä»˜ã‚„ã€é–å¹´ã®é–¢ä¿‚ã§ã‚ºãƒ¬ãŒç”Ÿã˜ã¦ãªã„ã‹ï¼‰

#### å½¢å¼ãƒã‚§ãƒƒã‚¯

æœ€åˆã¯ `0000-00-00` ã®ã‚ˆã†ãªå½¢å¼ã‹ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚ã“ã“ã§ã¯**æ­£è¦è¡¨ç¾**ã«ã‚ˆã‚‹ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã„ã¾ã™ã€‚

```javascript:å½¢å¼ã«ä¸€è‡´ã—ãªã„å ´åˆã‚’å¼¾ã
function isDateFormat(dateString) {
  // æ­£è¦è¡¨ç¾ã«ã‚ˆã‚‹å½¢å¼ãƒã‚§ãƒƒã‚¯ï¼ˆyyyy-MM-ddï¼‰
  const dateFormatRegex = /^\d{4}-\d{2}-\d{2}$/
  if (!dateString.match(dateFormatRegex)) return false;

  // ãƒã‚§ãƒƒã‚¯ã‚’ã™ã¹ã¦æº€ãŸã›ã°ã€true ã‚’è¿”ã™
  return true;
}
```

#### æœˆæ—¥ã®å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯

æ¬¡ã«ã€æœˆæ—¥ã®å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯ã§ã™ã€‚ã€Œ0æœˆ0æ—¥ã€ã‚„ã€Œ13æœˆ40æ—¥ã€ã¨ã„ã£ãŸæ—¥ä»˜ã¯å­˜åœ¨ã—ãªã„ã®ã§ã€ãã†ã—ãŸã‚±ãƒ¼ã‚¹ã‚’å¼¾ãã¾ã™ã€‚

```javascript:æœˆæ—¥ã¨ã—ã¦æˆç«‹ã—å¾—ãªã„å ´åˆã‚’å¼¾ã
function isDateFormat(dateString) {
  // æ­£è¦è¡¨ç¾ã«ã‚ˆã‚‹å½¢å¼ãƒã‚§ãƒƒã‚¯ï¼ˆyyyy-MM-ddï¼‰
  const dateFormatRegex = /^\d{4}-\d{2}-\d{2}$/
  if (!dateString.match(dateFormatRegex)) return false;

  // ç°¡æ˜“çš„ãªæœˆæ—¥ã®å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯ï¼ˆæœˆã®ç¯„å›²ã¯1ã€œ12ã‹ã€æ—¥ã®ç¯„å›²ã¯1ã€œ31ã‹ï¼‰
  const [year, month, day] = dateString.split('-').map(Number);
  if(
    (month < 1 || month > 12) ||
    (day < 1 && day > 31)
  ) return false;

  // ãƒã‚§ãƒƒã‚¯ã‚’ã™ã¹ã¦æº€ãŸã›ã°ã€true ã‚’è¿”ã™
  return true;
}
```

#### `Date` ã«ã‚ˆã‚‹å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯

æœˆæ—¥ã®å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯ã§ã¯ã€æœˆã‚„æ—¥ã®ç¯„å›²ã«ã¤ã„ã¦æ¤œè¨¼ã—ã¾ã—ãŸã€‚ã—ã‹ã—ãã‚Œã§ã‚‚ã€ã€Œ2æœˆ31æ—¥ã€ã‚„ã€Œ1999å¹´2æœˆ29æ—¥ï¼ˆé–å¹´ã§ãªã„ï¼‰ã€ã¨ã„ã£ãŸã€æš¦ä¸Š å­˜åœ¨ã—å¾—ãªã„æ—¥ä»˜ã®å¯èƒ½æ€§ãŒæ®‹ã£ã¦ã„ã¾ã™ã€‚

ãã“ã§æœ€å¾Œã«ã€`Date` å‹ã‚’ä½¿ã£ã¦å®Ÿåœ¨ã™ã‚‹æ—¥ä»˜ã‹ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚

`Date` å‹ã¯å­˜åœ¨ã—å¾—ãªã„æ—¥ä»˜ã®å ´åˆã€ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆãƒ»ãƒ‡ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã•ã‚Œã‚‹æ€§è³ªã‚’æŒã¡ã¾ã™ã€‚

```javascript:é–æ—¥ã‹ã‚‰Dateã‚’ä½œæˆ
const dateInLeapYear = new Date(2000, 1, 29);     // -> 2000å¹´2æœˆ29æ—¥ 00:00
const dateInNotLeapYear = new Date(1999, 1, 29);  // -> 1999å¹´3æœˆ1æ—¥ 00:00
```

ãã‚Œã‚’ä½¿ã„ã€å¼•æ•°ã®æ–‡å­—åˆ—ã«ã‚ã‚‹å¹´æœˆæ—¥ã¨ã®æ¯”è¼ƒã‚’è¡Œã„ã€ã‚ºãƒ¬ãŒç”Ÿã˜ã¦ã„ãªã„ã‹ã‚’ç¢ºã‹ã‚ã¾ã™ã€‚

```javascript:DateåŒ–ã—ã‚ºãƒ¬ãŸå ´åˆã‚’å¼¾ãã€å…¨ã¦ã®æ¤œè¨¼ãŒé€šã‚Œã°æ­£ã—ã„ã¨åˆ¤æ–­
function isDateFormat(dateString) {
  // æ­£è¦è¡¨ç¾ã«ã‚ˆã‚‹å½¢å¼ãƒã‚§ãƒƒã‚¯ï¼ˆyyyy-MM-ddï¼‰
  const dateFormatRegex = /^\d{4}-\d{2}-\d{2}$/
  if (!dateString.match(dateFormatRegex)) return false;

  // ç°¡æ˜“çš„ãªæœˆæ—¥ã®å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯ï¼ˆæœˆã®ç¯„å›²ã¯1ã€œ12ã‹ã€æ—¥ã®ç¯„å›²ã¯1ã€œ31ã‹ï¼‰
  const [year, month, day] = dateString.split('-').map(Number);
  if(
    (month < 1 || month > 12) ||
    (day < 1 && day > 31)
  ) return false;

  // date å‹ã«ã‚ˆã‚‹å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯ï¼ˆå…¥åŠ›å€¤ãŒ `2/31` ã¨ã„ã£ãŸå­˜åœ¨ã—ãªã„æ—¥ä»˜ã ã£ãŸã‚Šã€é–æ—¥ã«ã‚ˆã‚Šå®Ÿéš›ã®æ—¥ä»˜ã¨ã‚ºãƒ¬ã¦ãªã„ã‹ï¼‰
  const date = new Date(year, month - 1, day);
  if (
    date.getFullYear() !== year ||
    date.getMonth() + 1 !== month ||
    date.getDate() !== day
  ) return false;

  // ãƒã‚§ãƒƒã‚¯ã‚’ã™ã¹ã¦æº€ãŸã›ã°ã€true ã‚’è¿”ã™
  return true;
}
```

### ç”Ÿå¹´æœˆæ—¥ã‹ã‚‰å¹´é½¢ã¨çµŒéæ—¥æ•°ã‚’ç®—å‡º

ã“ã“ã¾ã§ã§ã€ä¸‹è¨˜ã®é–¢æ•°ã‚’ä½œæˆã—ã¾ã—ãŸã€‚

1. [æº€å¹´é½¢ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•° `calcAge()`](#æº€å¹´é½¢ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°)
2. [æœŸé–“ã®æ—¥æ•°ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•° `dateDiff()`](#æœŸé–“ã®æ—¥æ•°ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°)
3. [æ—¥ä»˜æ–‡å­—åˆ—ã‚’åˆ¤å®šã™ã‚‹é–¢æ•° `isDateFormat()`](#æ—¥ä»˜æ–‡å­—åˆ—ã‚’åˆ¤å®šã™ã‚‹é–¢æ•°)

ã“ã‚Œã‚‰ã‚’ä½¿ã„ã€ç”Ÿå¹´æœˆæ—¥ã‹ã‚‰å¹´é½¢ã¨çµŒéæ—¥æ•°ã‚’ç®—å‡ºã™ã‚‹å‡¦ç†ã‚’æ›¸ã„ã¦ã„ãã¾ã™ã€‚

#### ç”Ÿå¹´æœˆæ—¥ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨æ„ã™ã‚‹

ã¾ãšã¯ã€ç”Ÿå¹´æœˆæ—¥ã®æ–‡å­—åˆ—ã‚’ç”¨æ„ã—ã¾ã™ã€‚

```javascript:ç”Ÿå¹´æœˆæ—¥ã®ç”¨æ„
const birthday = '2000-08-23';
```

æ¬¡ã« ç”¨æ„ã—ãŸé–¢æ•°ã«å…¥ã‚Œã‚‹ãŸã‚ã«ã€ã“ã‚Œã‚’ `Date` å‹ã«å¤‰æ›ã—ã¾ã™ã€‚`isDateFormat()` ã§æ¤œè¨¼ã—ãŸå¾Œã€å¹´æœˆæ—¥ã‚’æ•°å€¤ã¨ã—ã¦å–ã‚Šå‡ºã—ã€`Date` ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«é€ã£ã¦ç”Ÿæˆã—ã¾ã™ã€‚  
ã¾ãŸ ã“ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ä»Šæ—¥ã®æ—¥ä»˜ã‚‚ `Date` ã§ä½œæˆã—ã¦ãŠãã¾ã™ã€‚

```javascript:å‡¦ç†å‰æº–å‚™
const birthday = '2000-08-23';

if(isDateFormat(birthday)) {
  const [year, month, day] = birthday.split('-').map(Number);
  const dateBirth = new Date(year, month - 1, day);
  const today = new Date();
}
```

#### å¹´é½¢ã¨çµŒéæ—¥æ•°ã‚’ç®—å‡ºã—ã¦å‡ºåŠ›

æº€å¹´é½¢ã‚’è¨ˆç®—ã™ã‚‹ã®ã¯ã€`calcAge()` ã‚’ä½¿ãˆã°å‡ºã›ã¾ã™ã€‚ã“ã“ã§ã¯å¾Œã®å‡¦ç†ç”¨ã«ã€`age` ã¨ã„ã†åå‰ã§æ ¼ç´ã—ã¦ãŠãã¾ã™ã€‚

```javascript:å¹´é½¢ã®ç®—å‡º
const birthday = '2000-08-23';

if(isDateFormat(birthday)) {
  const [year, month, day] = birthday.split('-').map(Number);
  const dateBirth = new Date(year, month - 1, day);
  const today = new Date();

  const age = calcAge(dateBirth, today);
}
```

æ¬¡ã«**ç¾å¹´é½¢ã«ãªã£ãŸåŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°**ã‚’æ±‚ã‚ã¾ã™ã€‚æœˆæ—¥ã«ã¤ã„ã¦ã¯ç”Ÿå¹´æœˆæ—¥ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãã®ã¾ã¾ä½¿ã„ã¾ã™ãŒã€å¹´ã«é–¢ã—ã¦ã¯**ä»Šå¹´ã®èª•ç”Ÿæ—¥ã‚’è¶Šãˆã¦ã„ã‚‹ã‹**ã«å¿œã˜ã¦å ´åˆåˆ†ã‘ï¼ˆâ€»ï¼‰ã«ãªã‚Šã¾ã™ã€‚  
ï¼ˆâ€»ï¼šè¶Šãˆã¦ã„ã‚‹å ´åˆã¯**ãã®å¹´**ã€ãã†ã§ãªã‘ã‚Œã°**å‰å¹´**ï¼‰

ä»Šå›ã¯ ãã®æƒ…å ±ã‹ã‚‰å¾—ã‚‰ã‚ŒãŸæº€å¹´é½¢ `age` ã‚’æ—¢ã«æŒã£ã¦ã„ã‚‹ã®ã§ã€**èª•ç”Ÿå¹´ã«æº€å¹´é½¢ã‚’è¶³ã™**ã“ã¨ã§ç®—å‡ºã§ãã¾ã™ã€‚

```javascript:ç¾å¹´é½¢ã®åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’ç®—å‡º
const birthday = '2000-08-23';

if(isDateFormat(birthday)) {
  const [year, month, day] = birthday.split('-').map(Number);
  const dateBirth = new Date(year, month - 1, day);
  const today = new Date();

  const age = calcAge(dateBirth, today);

  // ç¾å¹´é½¢ã®åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼ˆâ‰’èª•ç”Ÿæ—¥å‰æ—¥24æ™‚ï¼‰
  const timeAging = new Date(
    dateBirth.getFullYear() + age,
    dateBirth.getMonth(),
    dateBirth.getDate() - 1,
    24
  );
}
```

æœ€å¾Œã«ã€åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¨ä»Šæ—¥ã¨ã®æœŸé–“æ—¥æ•°ã‚’æ±‚ã‚ã¦çµŒéæ—¥æ•°ã‚’ç®—å‡ºã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’ `console.log()` ã§å‡ºåŠ›ã™ã‚Œã°ã€è«¸ã€…ã®å‡¦ç†ã®å®Œæˆã§ã™ã€‚

```javascript:çµŒéæ—¥æ•°ã‚’ç®—å‡ºã—ã€è«¸ã€…ã‚’å‡ºåŠ›
const birthday = '2000-08-23';

if(isDateFormat(birthday)) {
  const [year, month, day] = birthday.split('-').map(Number);
  const dateBirth = new Date(year, month - 1, day);
  const today = new Date();

  const age = calcAge(dateBirth, today);

  // ç¾å¹´é½¢ã®åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼ˆâ‰’èª•ç”Ÿæ—¥å‰æ—¥24æ™‚ï¼‰
  const timeAging = new Date(
    dateBirth.getFullYear() + age,
    dateBirth.getMonth(),
    dateBirth.getDate() - 1,
    24
  );

  const days = dateDiff(timeAging, today);

  console.log(`å¹´é½¢ã¯ ${age} æ­³ã€çµŒéæ—¥æ•°ã¯ ${days} æ—¥ã§ã™`);
}
```

ä¸Šè¨˜ã‚³ãƒ¼ãƒ‰ã§ã¯ã€ä¾‹ã¨ã—ã¦ç”Ÿå¹´æœˆæ—¥ã‚’ **2000å¹´8æœˆ23æ—¥**ã¨ã—ã¦ã„ã¾ã™ã€‚ãã—ã¦è¨˜äº‹ä½œæˆæ™‚ã¯2024å¹´ï¼ˆé–å¹´ï¼‰ã§ã™ã€‚ãã®çŠ¶æ³ä¸‹ã§ã€èª•ç”Ÿæ—¥å‰å¾Œã‚’ä»Šæ—¥ã¨ã—ãŸå ´åˆã®è¨ˆç®—çµæœã¯ã€ä¸‹è¨˜ã®ã¨ãŠã‚Šã¨ãªã‚Šã¾ã™ã€‚

|ä»Šæ—¥ã®æ—¥ä»˜|å‡ºåŠ›|
|:---:|:---|
| 2024å¹´8æœˆ22æ—¥ | å¹´é½¢ã¯ 23 æ­³ã€çµŒéæ—¥æ•°ã¯ 365 æ—¥ã§ã™ |
| 2024å¹´8æœˆ24æ—¥  | å¹´é½¢ã¯ 24 æ­³ã€çµŒéæ—¥æ•°ã¯ 1 æ—¥ã§ã™ |

## è£œè¶³

### ã‚³ãƒ¼ãƒ‰å…¨æ–‡

:::details ã‚³ãƒ¼ãƒ‰å…¨æ–‡ï¼ˆé•·ã„ã®ã§æ ¼ç´ã—ã¦ã„ã¾ã™ï¼‰

```javascript:é–¢æ•°
/**
 * ç”Ÿå¹´æœˆæ—¥ã‹ã‚‰ã€å¹´é½¢ã‚’è¨ˆç®—ã™ã‚‹ï¼ˆæ™‚é–“åŸºæº–ï¼‰
 *
 * @param {date} dateBirth - ç”Ÿå¹´æœˆæ—¥
 * @param {date} dateBase - è¨ˆç®—åŸºæº–æ—¥ï¼ˆä»Šæ—¥ï¼‰
 * @returns {int} - æº€å¹´é½¢
 */
function calcAge(dateBirth, dateBase = new Date()){
  // å‹ãƒã‚§ãƒƒã‚¯
  if(!(dateBirth instanceof Date && dateBase instanceof Date)) throw new Error('å¼•æ•°ã¯ Date å‹ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“');

  const age = dateBase.getFullYear() - dateBirth.getFullYear();

  // åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼ˆè¨ˆç®—åŸºæº–å¹´ï¼‰ã¯ã€èª•ç”Ÿæ—¥ã®å‰æ—¥24æ™‚
  const timeBoundaryForAging = new Date(
    dateBase.getFullYear(),
    dateBirth.getMonth(),
    dateBirth.getDate() - 1,
    24
  );

  // æº€å¹´é½¢ã¯ã€åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’ ã¾ã è¶Šãˆã¦ã„ãªã„å ´åˆã€ãƒ‡ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã—ã¦è¿”ã™
  if(timeBoundaryForAging > dateBase){
    return age - 1;
  } else {
    return age;
  }
}



/**
 * ï¼’ã¤ã®æ—¥ä»˜é–“ã«ã‚ã‚‹æ—¥æ•°ï¼ˆçµ¶å¯¾å€¤ï¼‰ã‚’ç®—å‡º
 *
 * @param {date} date1 - æ—¥ä»˜ï¼‘
 * @param {date} date2 - æ—¥ä»˜ï¼’
 * @returns {int} æœŸé–“å†…ã®æ—¥æ•°ï¼ˆä½™å‰°ã®æ™‚é–“ã¯åˆ‡ã‚Šæ¨ã¦ï¼‰
 */
function dateDiff(date1, date2) {
  // å‹ãƒã‚§ãƒƒã‚¯
  if(!(date1 instanceof Date && date2 instanceof Date)) throw new Error('å¼•æ•°ã¯ Date å‹ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“');

  // ãƒŸãƒªç§’å˜ä½ã§ã®æœŸé–“ã‚’æ±‚ã‚ã€æ—¥æ•°å˜ä½ã«ã—ã¦è¿”ã™
  const ms = Math.abs(date1.getTime() - date2.getTime());
  return Math.floor(ms / (1000 * 60 * 60 * 24));
}



/**
 * å¹´æœˆæ—¥ã‚’è¡¨ã™æ–‡å­—åˆ—ãŒã€é©æ­£ã‹ã‚’åˆ¤æ–­
 *
 * @param {string} dateString - 'yyyy-MM-dd' å½¢å¼ã®æ–‡å­—åˆ—
 * @returns {boolean} å­˜åœ¨ã—ã†ã‚‹æ—¥ä»˜ã‹ã®åˆ¤å®š
 */
function isDateFormat(dateString) {
  // æ­£è¦è¡¨ç¾ã«ã‚ˆã‚‹å½¢å¼ãƒã‚§ãƒƒã‚¯ï¼ˆyyyy-MM-ddï¼‰
  const dateFormatRegex = /^\d{4}-\d{2}-\d{2}$/
  if (!dateString.match(dateFormatRegex)) return false;

  // ç°¡æ˜“çš„ãªæœˆæ—¥ã®å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯ï¼ˆæœˆã®ç¯„å›²ã¯1ã€œ12ã‹ã€æ—¥ã®ç¯„å›²ã¯1ã€œ31ã‹ï¼‰
  const [year, month, day] = dateString.split('-').map(Number);
  if(
    (month < 1 || month > 12) ||
    (day < 1 && day > 31)
  ) return false;

  // date å‹ã«ã‚ˆã‚‹å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯ï¼ˆå…¥åŠ›å€¤ãŒ `2/31` ã¨ã„ã£ãŸå­˜åœ¨ã—ãªã„æ—¥ä»˜ã ã£ãŸã‚Šã€é–æ—¥ã«ã‚ˆã‚Šå®Ÿéš›ã®æ—¥ä»˜ã¨ã‚ºãƒ¬ã¦ãªã„ã‹ï¼‰
  const date = new Date(year, month - 1, day);
  if (
    date.getFullYear() !== year ||
    date.getMonth() + 1 !== month ||
    date.getDate() !== day
  ) return false;

  return true;
}
```

```javascript:å‡¦ç†æœ¬æ–‡
const birthday = '2000-08-23';

if(isDateFormat(birthday)) {
  const [year, month, day] = birthday.split('-').map(Number);
  const dateBirth = new Date(year, month - 1, day);
  const today = new Date();

  const age = calcAge(dateBirth, today);

  // ç¾å¹´é½¢ã®åŠ é½¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼ˆâ‰’èª•ç”Ÿæ—¥å‰æ—¥24æ™‚ï¼‰
  const timeAging = new Date(
    dateBirth.getFullYear() + age,
    dateBirth.getMonth(),
    dateBirth.getDate() - 1,
    24
  );

  const days = dateDiff(timeAging, today);

  console.log(`å¹´é½¢ã¯ ${age} æ­³ã€çµŒéæ—¥æ•°ã¯ ${days} æ—¥ã§ã™`);
}
```

:::
