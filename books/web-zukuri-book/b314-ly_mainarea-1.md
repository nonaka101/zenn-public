---
title: "📄B314：ly_mainArea(1)"
---

## このページについて

ここから２回に分けて、メイン部を構成する `ly_mainArea` を作成していきます。

１回目であるこのページでは、大枠となるベース部 `ly_mainArea` を規定します。内部に入れるサイドバーやメインコンテンツに関しては、次項で扱います。

## 構造の定義

`ly_footer` でも出てきましたが、コンテンツ全体に適用される規程がありました。

- コンテンツの最大幅は `1024px` までとする
- 画面幅がそれ以上ある時は、コンテンツ自身は `1024px` のまま、画面中央に配置する

その上で、メイン部の要件を決めていきます。最終的には、下記のようになります。

- コンテンツ全体の最大幅は `1024px`
- 横方向に `12fr` に分割したグリッドを用いる
- 「ヘッダー」「左サイドバー」「メインコンテンツ」「右サイドバー」を配置する
- 上記の要素は、ページに応じて配置が変わる（ヘッダーは除く）
  - フロントページのみ、構成比 3:6:3 の形で「左サイドバー」「メインコンテンツ」「右サイドバー」を配置
  - それ以外は構成比 9:3 の形で「メインコンテンツ」「右サイドバー」を配置
- 上記の要素は、画面幅に応じて配置が変わる
  - デスクトップ画面時
    - ヘッダーは左上
    - サイドバーを表示
  - モバイル画面時
    - ヘッダーは上部に固定
    - サイドバーは非表示（メニューボタン＋ダイアログの構成）

まずはこれらの要件について説明していきます。

### 扱う要素について

`ly_mainArea` で扱う要素は、最大で４つです。これらは、ランドマークの役割を持つHTMLタグを使います。

- ヘッダー（`header` タグ）
- 左サイドバー（`nav` タグ）
- メインコンテンツ（`main` タグ）
- 右サイドバー（`aside` タグ）

![フロントページ（各要素に印をつけた状態）](/images/books/web-zukuri/ly_mainArea-01.png)

ここからの話は複雑になっていきますが、要はこれらをどう扱うかについてを決めていくことになります。

これらの要素を配置するうえで、ページの種類や画面幅に応じて見やすい形に変化します。そのベースとなるのが、`ly_footer` でも扱った `12fr` に分割したグリッドレイアウトです。

![フロントページ（12で分割したグリッドを表示している状態）](/images/books/web-zukuri/ly_mainArea-02.png)

### フロントページ

まずはフロントページから見ていきます。

#### フロントページ（デスクトップ画面）

フロントページでは、左サイドバーを含む全ての要素を取り扱います。

![フロントページ（各要素に印をつけた状態）](/images/books/web-zukuri/ly_mainArea-01.png)

グリッドの構成としては、2行に分けた構成で、1行目はヘッダーに、2行目はその他に割り振っています。列方向に関しては、構成比 3:6:3 で「ヘッダー＋左サイドバー」「メインコンテンツ」「右サイドバー」に割り振っていることがわかります。

- ヘッダーは 1行目の 1列目から、3列分のサイズ
- 左サイドバーは 2行目の 1列目から、3列分のサイズ
- メインコンテンツは 2行目 4列目から、6列分のサイズ
- 右サイドバーは 2行目 10列目から、3列分のサイズ

![上記で挙げたグリッド構成のイメージ図](/images/books/web-zukuri/ly_mainArea-06.png)

#### フロントページ（モバイル画面）

モバイル画面時は要素を横に並べる余裕がないため、縦１列に配置します。

![フロントページ（モバイル画面）](/images/books/web-zukuri/ly_mainArea-03.png)

また、画面から下記のことが見て取れます。

- ヘッダーが画面上部に固定
- ヘッダーに新しくボタンアイコンが出現
- 左右サイドバーがなくなっている

左右サイドバーにあった内容は、ヘッダーにあるボタンアイコン「メニュー」にて、ダイアログ要素として格納しています。

![メニューダイアログ](/images/books/web-zukuri/ly_mainArea-04.png)

#### フロントページ外（デスクトップ画面）

フロントページ以外のページでは、左サイドバーがなくなります。

![フロントページ以外の画面](/images/books/web-zukuri/page-single-01.png)

左サイドバーの構成比 3 をメインコンテンツに移行し、画面構成が 9:3 に変わったこと以外は、特段の変化はありません。

- ヘッダーは 1行目の 1列目から、3列分のサイズ
- メインコンテンツは 2行目 1列目から、9列分のサイズ
- 右サイドバーは 2行目 10列目から、3列分のサイズ

#### フロントページ外（モバイル画面）

モバイル画面の構成は、フロントページの場合と同じで縦１列に配置します。

![上図のモバイル画面の状況](/images/books/web-zukuri/ly_mainArea-05.png)

## 作成

では作成に写っていきます。必要な要件は下記のとおりです。

- コンテンツ全体の最大幅は `1024px`
- 横方向に `12fr` に分割したグリッドを用いる
- 「ヘッダー」「左サイドバー」「メインコンテンツ」「右サイドバー」を配置する
- 上記の要素は、ページに応じて配置が変わる（ヘッダーは除く）
  - フロントページのみ、構成比 3:6:3 の形で「左サイドバー」「メインコンテンツ」「右サイドバー」を配置
  - それ以外は構成比 9:3 の形で「メインコンテンツ」「右サイドバー」を配置
- 上記の要素は、画面幅に応じて配置が変わる
  - デスクトップ画面時
    - ヘッダーは左上
    - サイドバーを表示
  - モバイル画面時
    - ヘッダーは上部に固定
    - サイドバーは非表示（メニューボタン＋ダイアログの構成）

### ランドマーク要素

まずはランドマーク要素についてです。昨今のスクリーンリーダーには、ランドマークへの移動機能が備わっています。これにより、コンテンツを順に読み上げることなく、必要な情報に素早くアクセスすることができます。

ランドマークは `role="banner"` のようにロールを指定する方法もありますが、HTMLタグによる暗黙の指定を活用したほうが良いでしょう。それを踏まえて、各コンテンツを配置すると、例えば下記のようになります。

```html:ランドマーク要素
<body>
  <header>
    <!-- ヘッダー -->
  </header>
  <nav>
    <!-- 左サイドバー -->
  </nav>
  <main>
    <!-- メインコンテンツ -->
  </main>
  <aside>
    <!-- 右サイドバー -->
  </aside>
  <footer>
    <!-- フッター -->
  </footer>
</body>
```

ここで注意しなければならないのは、「ランドマーク要素同士でネストするような構成にしない」ことです。例えば下記のようにしてしまうと、ランドマーク機能はうまく働かなくなります。

```html:ダメな例：ランドマーク要素がネストしている
<body>
  <main>
    <header>
      <!-- ヘッダー -->
    </header>
    <nav>
      <!-- 左サイドバー -->
    </nav>
    <div>
      <!-- メインコンテンツ -->
    </div>
    <aside>
      <!-- 右サイドバー -->
    </aside>
    <footer>
      <!-- フッター -->
    </footer>
  </main>
</body>
```

なので、ランドマーク要素をネストしないような構造で要件を達成できるようにしなければなりません。

### HTMLの構造

上記を踏まえ、適切なランドマーク構造を下記のようにします。

```html:ベースとなる構造
<body>
  <header><!-- ヘッダー --></header>
  <nav><!-- 左サイドバー --></nav>
  <main><!-- メインコンテンツ --></main>
  <aside><!-- 右サイドバー --></aside>
  <footer><!-- フッター --></footer>
</body>
```

次に、どこに `ly_mainArea` をつけるかを考えます。これにより、グリッド管理する基準位置が決まります。

`body` タグにつけると、前項で作成した `footer.ly_footer` に干渉してしまいます。そのため、本テーマでは `footer` と区切るために `div` を設け、そこに`ly_mainArea` をつけるようにしています。

```html
<body>
  <div class="ly_mainArea">
    <!-- 12Grid を用いたレイアウト構成 -->
    <header><!-- ヘッダー --></header>
    <nav><!-- 左サイドバー --></nav>
    <main><!-- メインコンテンツ --></main>
    <aside><!-- 右サイドバー --></aside>
  </div>
  <!-- /.ly_mainArea -->
  <footer class="ly_footer">
    <!-- 12Grid を用いたレイアウト構成 -->
  </footer>
  <!-- /.ly_footer -->
</body>
```

:::message

本テーマでは12グリッドによるレイアウトを作っていますが、このように `ly_footer` と `ly_mainArea` のそれぞれでグリッドを構成するようにしています。これはグリッド構造が複雑にならないようするためです。

これまで説明した通り、`ly_mainArea` はページや画面サイズに応じてレイアウト構成が変わり、複雑性が高いです。その中に更に `ly_footer` の要素を組み入れてしまうと、複雑性が一気に増し、意図せぬ動作を起こしやすくなります。そのためグリッド管理を2つに分け、管理しやすく、拡張しやすくしています。

:::

### スタイル

HTML構造が決まったので、次にそれに対するスタイリングをしていきます。

#### サイズ

まずは `ly_mainArea` 自体のレイアウトです。ここでは下記の要件を規定していきます。

- コンテンツの最大幅は `1024px`
  - それ以上の画面サイズの場合は、`1024px` を維持したまま中央に配置
- 余白について
  - 画面幅がとても小さい場合（`560px` より下）、最低限の左右余白を取る（`24px`）
  - 少し余裕がある場合（`960px` より下）、左右余白を少し広めに取る（`40px`）
  - デスクトップ画面の場合（`1120px` より下）、レイアウト構成が変わり上下にも余白を取る（`64px`）
  - 画面幅がとても大きい場合（`1120px` 以上）、左右の余白調整は `margin` が行ってくれるので `padding` は除去

```css:style.css
.ly_mainArea {
  max-width: 1024px;
  padding: 0 24px;
  margin-right: auto;
  margin-left: auto;
}

@media (min-width: 560px) {
  .ly_mainArea {
    padding: 0 40px;
  }
}

@media (min-width: 960px) {
  .ly_mainArea {
    padding: 64px 40px 0;
  }
}

@media (min-width: 1120px) {
  .ly_mainArea {
    padding-right: 0;
    padding-left: 0;
  }
}
```

#### グリッド

次にグリッドです。

- 横方向は、`12fr` に分割して管理
- 縦方向は、ヘッダー用に最低２行分設ける
- `column-gap` のみ管理し、画面幅が大きくなるに連れ `gap` 値も大きくする

```css:style.css
.ly_mainArea {
  display: grid;
  grid-template-rows: auto auto 1fr;
  grid-template-columns: repeat(12, 1fr);
  grid-auto-flow: row;
  gap: 0 4px;
}

@media (min-width: 560px) {
  .ly_mainArea {
    gap: 0 8px;
  }
}

@media (min-width: 960px) {
  .ly_mainArea {
    gap: 0 16px;
  }
}

@media (min-width: 1120px) {
  .ly_mainArea {
    gap: 0 32px;
  }
}
```

## 完成形

最後に完成形をまとめておきます。

:::details 全文（長いので格納しています）

```html
<body>
  <div class="ly_mainArea">
    <!-- 12Grid を用いたレイアウト構成 -->
    <header><!-- ヘッダー --></header>
    <nav><!-- 左サイドバー --></nav>
    <main><!-- メインコンテンツ --></main>
    <aside><!-- 右サイドバー --></aside>
  </div>
  <!-- /.ly_mainArea -->
  <footer class="ly_footer">
    <!-- 12Grid を用いたレイアウト構成 -->
  </footer>
  <!-- /.ly_footer -->
</body>
```

```css:style.css
.ly_mainArea {
  display: grid;
  grid-template-rows: auto auto 1fr;
  grid-template-columns: repeat(12, 1fr);
  grid-auto-flow: row;
  gap: 0 4px;
  max-width: 1024px;
  padding: 0 24px;
  margin-right: auto;
  margin-left: auto;
}

@media (min-width: 560px) {
  .ly_mainArea {
    gap: 0 8px;
    padding: 0 40px;
  }
}

@media (min-width: 960px) {
  .ly_mainArea {
    gap: 0 16px;
    padding: 64px 40px 0;
  }
}

@media (min-width: 1120px) {
  .ly_mainArea {
    gap: 0 32px;
    padding-right: 0;
    padding-left: 0;
  }
}
```

:::

## まとめ

本項ではメイン部となる `ly_mainArea` のベース部を見ていきました。

次項では、中の子要素 `header`, `nav`, `main`, `aside` 要素に対するスタイリング等を中心に行っていきます
