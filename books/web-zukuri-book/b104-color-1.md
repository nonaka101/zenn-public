---
title: "📄B104：色について(1)"
---

## このページについて

ここでは色に関するスタイルについて、２回に分けて説明します。

まずは **B102：スタイルルール** にて登場した、**色に関するルール**を見てみます。

- ルート上に、プリミティブカラー（カスタムプロパティ）を用意する
- プリミティブカラーを使用して、カラーモードに対応したセマンティックカラー（カスタムプロパティ）を用意する
- 原則として、サイトの色に関するスタイルは、このセマンティックカラーから使用する

このように、色に関しては**セマンティックカラー**というものが中心となり、それは**カスタムプロパティ**であることが読み取れます。  
具体的な話は次回に回し、本項では概要となる下記の事柄について説明していきます。

- **カラーモード**とはどのようなものか
- 実現するための機能である**カスタムプロパティ**について
- **プリミティブカラー**と**セマンティックカラー**という考え方について

## 本テーマにおけるカラーモードについて

本テーマでは、ライト⇔ダーク間のカラーモードに対応しています。ブラウザ（もしくはOS）の設定で指定したカラーモードで、ページを閲覧することができます。

![ライト↔ダークモードの説明図、モードを切り替えることで背景色とテキスト色を反転できる](/images/books/web-zukuri/about-color-mode-01.png)

開発者ツールで確認してみると、色に関するスタイル `color`, `background-color` の箇所で、`var(--sc_*)` という設定を使っていることを確認できます。

![開発者ツールでの色に関するスタイル文（color, background-colorをRGB値ベタ打ちにしていない）](/images/books/web-zukuri/about-color-mode-02.png)

この `var(--sc_*)` という記述はカスタムプロパティで、本テーマではこれを状況に応じて値を上書きすることで、カラーモードを実現しています。

![カスタムプロパティの動きに関する説明（フローとして、カラーパレットのようなプリミティブカラーを用意し、そこから色を拾い上げセマンティックカラーを構成、それを使い要素の色をスタイリングしている）](/images/books/web-zukuri/about-color-system-01.png)
*セマンティックカラーのイメージ図*

## カスタムプロパティについて

カスタムプロパティは、接頭辞 `--` を付けることで利用できるプロパティです。プロパティ名と何らかのCSS値のセットで構成され、`var()` 関数でアクセスすることができます。

https://developer.mozilla.org/ja/docs/Web/CSS/--*

例えば、下記のCSSは、ルート要素で `--main-bg-color` を定義し、`body` 要素で参照しています。

```css:カスタムプロパティの基本
:root {
  /* これがカスタムプロパティ */
  --main-bg-color: #ffffff;
}

body {
  /* カスタムプロパティを参照しているので、この場合の背景色は #ffffff となる */
  background-color: var(--main-bg-color);
}

.main_content {
  /*
   * カスタムプロパティの利点は、統一した設定値を一括管理できること。これにより、
   * 1. 個別にCSS値を直接入力する必要がなく、（VSCodeなどで）インテリセンス機能が使える
   * 2. ルート上の変更で全てに対応できるため、変更が生じた際の更新漏れを防止できる
   */
  background-color: var(--main-bg-color);
}
```

そして**継承**という特徴が重要です。下記のCSSが適用されたHTMLでは、「黒→青→青→黒」の形式で `Text` が表示されます。

```css:継承サンプル
/* ルート上では「黒」と設定 */
:root { --txt-color: black;}

/* div と p 要素内でカスタムプロパティを使用 */
div, p { color: var(--txt-color); }

/* layerクラス内では、カスタムプロパティを「青」に上書き */
.layer { --txt-color: blue; }
```

```html:継承サンプル
<div>
  Text<!-- 黒 -->
  <div class="layer">
    Text<!-- 青 -->
    <div>
      Text<!-- 青 -->
    </div>
  </div>
</div>
<p>
  Text<!-- 黒 -->
</p>
```

ここで大事なのは下記の３点です。

1. ルート上で決めたCSS値を上書きできること
2. 親子関係がある場合、子は親の内容を継承すること
3. 上書きが適用される範囲は、特定の要素（あるいは状況）に限定されること

カスタムプロパティが持つこれらの特徴がカラーモードの切替に適していると考え、本テーマではカスタムプロパティを使ったカラーモード機能を採用しました。

カスタムプロパティの使用法についてもっと知りたい場合は、下記のページを参照ください。

https://developer.mozilla.org/ja/docs/Web/CSS/Using_CSS_custom_properties

## プリミティブカラーとセマンティックカラーについて

前項で紹介したカスタムプロパティを使い、カラーモードを実装していきますが、その前に*プリミティブカラー*と*セマンティックカラー*について説明していきます。

### プリミティブカラーとは

デジタル庁デザインシステム（※以下、デザインシステム）では、下記のように書かれています。

> プリミティブカラー2.0はカラーシステムの基盤となる基本的な色で構成され、様々なサービスに統一感のあるカラースキームを作成するために利用します。各ベースカラーは広範なカラー設定を導出するための色相と明度の段階で構成されています。プリミティブカラー2.0を参考とし、色相、明度、彩度などを調整しサイトやサービスの目的に相応しいカラースキームを構築します。
> 『デジタル庁デザインシステム Ver 1.4.0』より抜粋

本テーマでのプリミティブカラーは、**カラーパレットのようなもの**とイメージしてください。

例えば CSS での RGB 値を使った色を使う場合、その色のパターンは `256*256*256=16777216` 色となります。自由度が高いというのは一見メリットに見えますが、見方を変えると、「肉眼では `RGB(0,0,0)` も `RGB(1,0,0)` も同じ黒に見える以上ここまで細かな表現が必要なのか？」という疑問がでてきます。

また、その場その場で個別の色を使用していくのは、管理が難しいという問題があります。

- コントラスト比の計算を個別の色同士で計算する必要がある
- 「別要素で同じ色を使用する」場合でも、値が同一でない可能性がある
- サイトのデザインに統一感がなくなる（あるページでは濃い青色をアクセントとし、別のページでは薄めの青色をアクセントとする）

そこで本テーマでは、**使用できる色数に制限をかけています**。大きく分けると「青」「赤」「緑」「茶」そして「白黒」です。各色は、 50 から 1200 までの 13 段階で構成されています。

![プリミティブカラーの一覧](/images/books/web-zukuri/about-color-system-02.png)
*プリミティブカラーの一部*

これらの色をカラーパレットに見立て、サイトで使用する色は、原則これらの色を使用するルールになっています。こうすることで、下記のメリットがあります。

- 統一感のあるページを作りやすい
- コントラストに応じた色の使用が容易（調べる色数が限られているので）

### セマンティックカラー

デザインシステムでは、下記のように書かれています。

> セマンティックカラーは、デザインスタイルやUIの種別を問わず特定の意味や目的が割り当てられたカラーです。これらのカラーは特定の情報や文脈で意味を伝えるために使用され、情報伝達上の機能的な役割を持っています。緑といえばサクセス、赤といえばエラー、というように、一貫性のある特定の意味を持った視覚的な共通言語となります。
> 『デジタル庁デザインシステム Ver 1.4.0』より抜粋

本テーマではセマンティックカラーを、**役割ごとの、状況に応じた色を管理するためのシステム**として考えています。

テキスト、背景、枠線など、各要素には役割に応じた色が必要です。例えばテキストですが、背景が白地の場合、見やすさを重視してコントラスト比の高い黒色であることが必要です。

![セマンティックカラーの構成図１（テキスト色の例で、背景白の場合は黒、といった状況）](/images/books/web-zukuri/about-color-system-03.png)

そしてその色は一色とは限りません。ライト↔ダークのカラーモードに対応している場合、必要となる色は少なくとも２つになります。

先程のテキストの例を考えてみます。背景が白地の場合、テキスト色は黒色でした。しかしダークモードで背景が黒地になった場合はどうでしょうか？ テキスト色が同じ黒色では、読めない、あるいは非常に読みづらいことになってしまいます。

![背景色とテキスト色との対比図、白地の背景色には黒字のテキストを、黒字の背景には白字のテキストを、灰色は両背景で見えるがコントラスト比が低く見づらくなっている](/images/books/web-zukuri/about-color-system-04.png)

![セマンティックカラーの構成図２（テキスト色の例で。上図に背景黒を入れ、テキストが黒のままで見づらい状態）](/images/books/web-zukuri/about-color-system-05.png)

なので、テキスト色は「背景が白地の場合は黒色、黒地の場合は白色」といったように、複数の**状況に適した色**を持つ必要があります。

![セマンティックカラーの構成図３（テキスト色の例で、上図にプラスする形で、背景黒の場合を追加）](/images/books/web-zukuri/about-color-system-06.png)

テキストで行ったこの内容を、更に「ボタンテキストの場合」「警告テキストの場合」など役割ごとに作成していきます。

![セマンティックカラーの構成図４（上記を拡充し、ボタンテキストの場合や警告テキストの場合を用意）](/images/books/web-zukuri/about-color-system-07.png)

この考えを更に拡大し、「枠線」「背景」などに適用していくことで、セマンティックカラーが出来上がります。

![セマンティックカラーの構成図５（上記を更に拡充、４までの内容を「テキスト」グループとして囲み、同列に「枠線」「背景」などを追加）](/images/books/web-zukuri/about-color-system-08.png)

こうして出来上がったシステムでは、「テキストはこの範囲内」「枠線はこの範囲内」「背景はこの範囲内」と、要素の種別に応じて使用できる色が制限されていることがわかります。これにより、下記のメリットが生まれます。

- 色を選択する手間をなくして効率化する
- サイト全体で統一感のあるデザインにしやすい
- セマンティック側の変更で、関連する要素の色を一括変更できる（変更漏れが起きにくい）

### プリミティブカラー＋セマンティックカラー

ここまでで説明したプリミティブカラーとセマンティックカラーを組み合わせると、下記のようになります。

- プリミティブカラーを設けて、サイト上で使用する色を制限する
- セマンティックカラーを設けて、各種要素に応じて使用できる色を制限する
- １つのセマンティックカラーにはライトモード時とダークモード時の２色を設定する
- セマンティックカラーで設定できる色は、直接のCSS値でなくプリミティブカラーから選択する

![プリミティブとセマンティックの関係図（３段階あり、１段階目に色のグラデーション、第二段階にプリミティブカラー、第三段階にセマンティックカラーとなる）](/images/books/web-zukuri/about-color-system-09.png)
*多数ある色から使用するものをプリミティブカラーという形で抽出、そこから各要素毎に使う色をセマンティックカラーという形で管理する*

最終的に、本テーマで使用するセマンティックカラーは、下記のようになります。

![セマンティックカラーの一覧１、テキスト関係の色指定を、「カラー名」「ライト時」「ダーク時」の列を持つ表形式で表されている](/images/books/web-zukuri/semantic-color-01.png)
*テキスト関係のセマンティックカラー*

![セマンティックカラーの一覧２、主に枠線に関する色指定を表形式で表している](/images/books/web-zukuri/semantic-color-02.png)
*テキスト関係と、枠線に関するセマンティックカラー*

![セマンティックカラーの一覧３、主に背景に関する色指定を表形式で表している](/images/books/web-zukuri/semantic-color-03.png)
*背景に関するセマンティックカラー*

## まとめ

本項では、下記のことについて説明しました。  

- カラーモードとはどのようなものか
- カスタムプロパティの特徴や使い方
- プリミティブカラーとセマンティックカラーという考え方について

次項は実際の `style.css` を参照する形で、テーマ内でどのようにカラーモードを実現しているかを見ていきます。
