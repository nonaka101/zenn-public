---
title: "🗃目次"
---

## この本について

この本は、下記の WordPress テーマ「Web-Zukuri」を作成した際の備忘録です。

https://github.com/nonaka101/web-zukuri

https://nonaka101.github.io/web-zukuri/

![テーマのサンプルページ](/images/books/web-zukuri/page-index-01.png)

## 目次

本書は大きく３章（＋１）で構成されます。

1. 第一章（総則）：基本や全体に関わる説明
2. 第二章（ベース作成）：`html`, `css`, `Javascript` を中心に、テーマのベースとなる静的ページを作成していく
3. 第三章（テーマ作成）：前章の静的ページを `php` でテーマ化していく
4. 付録：「複数の考えがある中での自身の判断」のような、私的性質が強いメモ

各章内は更に「コンポーネントについて」「ページレイアウトについて」などのように、内容ごとに節に別れていきます。そして各節は更に、文量に応じて項として分割されています。本書はこの「章 - 節 - 項」の構造で作られています。

### 第一章：総則

ここでは、目的や使い方といった基本的なことについて説明していきます。他にも、具体的なコーディングやマークアップ前に抑えておくべきもの、全体に関わるものなどを中心に説明していきます。

:::details 概要

#### A000：第一章概要

##### A001：初めに

- 本書はどのようなものなのか
- 読んでいただいている方への注意事項
- 本書を読む際に必要となる知識について

##### A002：本テーマの特徴について

- レスポンシブデザイン
- デジタル庁デザインシステムを参考に作成
- カラーモード
- フォントサイズ
- その他のアクセシビリティ要素
- 開発用機能としてツールを用意
- CSS設定の参考にPRECSSを使用

##### A003：導入方法

- リポジトリのダウンロード
- WordPressへのテーマデータの反映
- 管理画面上の各種設定

##### A004：ライセンスについて

- 私が作成した範囲について
- その他のライセンスについて
  - WordPress
  - Google Font
  - Material Symbols and Icons
  - normalize.css

##### A005：参考にした資料

- デザインシステム（デジタル庁）
- ウェブアクセシビリティ導入ガイドブック（デジタル庁）
- 書籍：Webアプリケーションアクセシビリティ
- 書籍：HTML解体新書
- 書籍：CSS設計完全ガイド
- 書籍：JavaScript
- 書籍：WordPressオリジナルテーマ制作入門

:::

:::details 第一節：Webアクセシビリティ

#### A100：概要 Webアクセシビリティ

##### A101：Webアクセシビリティとは？

- Webアクセシビリティとは、様々な人がウェブにアクセスできるための仕組み
  - 対象者は、障がいの有無に限定されない
  - アクセスできることに加え、利便性を向上させる
  - 仕組みには、主流となる手法を用いる

##### A102：アクセシビリティを目指した設計について

- マシンリーダブルであること
  - 適切なHTMLタグの使用
  - ページ内の構造化
  - ラベル付きアイコン
- 読みやすさへの配慮
  - カラーモード
  - フォントサイズ

##### A103：スクリーンリーダー

- 各デバイスで使用できるスクリーンリーダーの説明

:::

### 第二章：HTML, CSS, JavaScript

ここでは、WordPressテーマのベースとなるデータを作成した際の話をしていきます。  
使う言語は、`HTML`, `CSS`, `JavaScript` となります。

:::details 概要

#### B000：第二章概要

##### B001：構成について(1)

- WordPress の中身について
  - どのようにページを生成するか
  - そこから必要となるデータは何か
- 各ページについて
- ページテンプレートとは

##### B001：構成について(2)

- テンプレートパーツとは
- WordPress テーマ化を見据えた構成について
- 各種ファイルの大まかな説明

:::

:::details 第一節：スタイル

#### B100：概要 スタイル

##### B101：全体の構成

- 使用するCSSの役割について
  - `normalize.css`
  - GoogleFont関係
  - `style.css`
  - `devUtilities.css`

##### B102：スタイルルール

- ルールの参考元 `PRECSS` とは？
- 本テーマにおけるスタイルルール
- `stylelint` によるプロパティ整列
- モバイルファースト
- `box-sizing` について
- 要素セレクタへのスタイリング
- フォーカスのスタイリング

##### B103：PRECSS関連のルール

- 各種接頭辞の役割
- クラス名の命名規則
- 上位要素と下位要素の責任関係
- モディファイアについて

##### B104：色について(1)

- 本テーマのカラーモードの仕組み
- カスタムプロパティとは？
- プリミティブカラーとセマンティックカラー

##### B104：色について(2)

- `css` 上のプリミティブカラーとセマンティックカラー
- `prefers-color-scheme: dark` によるカラーモード切替
- セマンティックカラーの命名規則
- 要素セレクタへの色設定

:::

:::details 第二節：開発用ツール

#### B200：概要 開発用ツール

##### B201：必要となる機能について

- 検証に必要な機能とは何か？
- 機能１「カラーモードの切り替え」
- 機能２「フォントサイズの切り替え」

##### B202：ツールの配置

- ツールを画面のどこに配置するか
- 各機能で必要となるコントロールの種類と個数

##### B203：ツールの設計

- ツールボックスの作成
- 各種機能用のコントロール作成
- 作成した内容全文

##### B204：カラーモード変更(1)

- どのような機能にしていくか
- `style.css` でのカラーモード扱いについて
- 手動モード時のスタイルについて
- 考えるべき場面について
- 上書きクラスのスタイル
- スタイル全文

##### B204：カラーモード変更(2)

- 前回までの内容について
- JavaScript で実装する機能の定義
- そのためのスタイル
- クラス付与、除去について
- hidden 属性の切り替え
- セッション中の設定維持について
- 機能の実装
- コード全文

##### B205：フォントサイズ変更

- 機能の定義
- ルートフォントサイズについて
- 機能の実装
- コード全文

:::

:::details 第三節：基本コンポーネント

#### B300：概要 基本コンポーネント

##### B301：構成

- 各種基本コンポーネントの画像と説明
  - エレメントモジュール
  - ブロックモジュール
  - レイアウト
  - 特殊系
    - プログラムモジュール
    - WordPress用モジュール

##### B302：`el_thumbnail`

- サムネイル要素に使われる
- 最も簡単な部品であり、これを使ってエレメントモジュールを学んでいく
- サムネイル画像はどこで使われ、WordPressはどう関わるか
- カード形式で使うアスペクト比について、画像とどう折り合いをつけるか

##### B303：`el_heading`

- 見出し要素に使われる
- 前項の基礎からメディアクエリを使ったケースとなる
- 『デジタル庁デザインシステム（Ver 1.3.2）』で規定してある内容との兼ね合い
- どういった場面で `rem` を使うべきなのか？
- カスタムプロパティを使ったスペース管理
- バリエーションは６つあるがモディファイアは使わない
- モバイルファーストで作る時の手順

##### B304：`el_link`

- リンク要素（インライン）に使われる
- 前項までの内容にプラスして、擬似クラスを扱う
- デフォルトの `a` タグとの違い
- セマンティックカラーを擬似クラスごとに使い分ける

##### B305：`el_btn`

- `a`, `button` タグを使ったボタン要素に使われる
- これまでの内容にプラスして、モディファイアを扱う
- ３種あるボタンの説明（Primary, Secondary, Tertiary）
- ベースクラスとモディファイアの関係
- デフォルトスタイルの打ち消し
- テキストサイズに `rem`、余白に `px` を使う理由
- `disabled` 属性を付与した場合のスタイル
- 自身のサイズに対応した角丸にするテクニックについて
- アクセシビリティの観点から、`a`, `button` タグは適切に使用すべき

##### B306：`bl_tagMenu`

- 各サイドバーやフッター、ダイアログなどで使われるメニュー要素
- ブロックモジュールについての基礎的な要素となる
- WordPress側のサブメニューを考慮
- アクセシビリティについて
  - `list-type: none;` の問題点
  - `aria-labeledby` でラベル要素と紐づけ
  - `aria-hidden` で消しつつ読み上げには反映させる

##### B307：`bl_postData`

- 投稿ページで使われる、記事の補足情報を載せる欄となる
- WordPressのDBが扱っている記事データについて
- （上記が）投稿ページでどのように反映されているか
- なんで補足情報を画面上部に持ってきたかの私見
- `flex-flow: row wrap` を使いレイアウトを構成する

##### B308：`bl_pager`

- 複数ページにまたがる場合の区切り要素となる
- 出力内容に幅がある中で位置を固定させる方法
- インラインSVGを使ったボタン設計
- アクセシビリティについて
  - `nav` タグについて
  - WAI-ARIA を使った読み上げ調整

##### B309：`bl_blockSkip`

- ブロックスキップとは？
  - どこで使われ、なぜ必要なのか？
  - WCAGでは、実は現在必須要件ではない
- 本テーマでは、２箇所で用いている
- 通常はスクリーンリーダー用要素によく使われる方法で隠す
- `focus-within` を使った表示方法
- ページ種類や画面サイズによるリンク要素の差異についてはモディファイアで対応
- リンク先について
  - URLフラグメントを使用してアンカーをつける
  - `tabindex="-1"` を使用

##### B310：`bl_accordion`

- 展開/格納ができる要素
- `details`, `summary` タグについて
- デフォルトのスタイルを剥ぐ
- CSS の `background-image` で `∨` を表現
  - ダークモード時は色を反転させることで対応
  - 展開時はマークを180度回転
- アーカイブ用パーツとして
  - WordPressではカテゴリに親子関係を持たせられる
  - `summary` の暗黙のロールは `button`
  - そのため、展開/格納ボタンとリンク要素は分ける必要がある

##### B311：`bl_searchForm`

- サイト内検索用のフォーム
- `form` 要素について
- CSS の `background-image` で `∨` を表現
  - ダークモード時は色を反転させることで対応
- モバイルファースト設計の例外として `max-width` によるメディアクエリを使用
- 非常に画面幅が小さいケースの想定

##### B312：`bl_card` (1)

- 様々な場面で使用される、1つの記事をカードにした要素
- WordPressでの記事データについて
- 各種ページにある、カードのバリエーション
- 複数の `a` タグ使用による、クリック可能範囲について
- 擬似クラス関数 `:has()`, `:not()` について

##### B312：`bl_card` (2)

- 前項の基本設計を使い、バリエーションを設ける
- カード群を格納する要素を作成
- バリエーション１：スティッキー
- バリエーション２：クリッカブル
- バリエーション３：小サイズ

##### B313：`ly_footer`

- フッター要素を使い、簡易的なレイアウトから学んでいく
- 12グリッド構成について
  - 中身の構成は画面幅に応じて変わる
- ウィジェット要素による構成

##### B314：`ly_mainArea` (1)

- フッターに対し、メインエリアのレイアウト
- ここでも12グリッド構成を使用
  - ただしページの種類に応じて中身の構成が変わる
  - 更に画面幅に応じても構成は変化する
  - `ly_footer` とはグリッド構成を別にする
- ランドマーク要素について
- ここではHTML構成にとどめ、どのような形にしていくかを説明

##### B314：`ly_mainArea` (2)

- 上記で作成したHTML構成を使い、実際にスタイリングを施していく
- メインコンテンツは２つのバリエーションがあるため、モディファイアにて対応
- ヘッダー要素はモバイル画面時にはグリッドシステムから外れる
- サイドバーは画面幅に余裕があるデスクトップ画面時のみ表示
  - サイドバーにあった中身は、メニューダイアログが受け持つ

##### B315：`ly_dialog` (1)

- ダイアログの役割について
- モーダルダイアログはアクセシビリティへの配慮が必須
  - フォーカス制御
  - 自身の展開/格納 状態
  - ダイアログ内に自身を閉じる手段を（できれば複数）用意
- 上記を達成するために、大きく2つの方法がある
  - WAI-ARIA と JavaScript を使う方法
    - ライブラリの使用でなければ、かなりの工数が必要となる
  - `dialog` 要素は最近の機能だが、ブラウザ側が自動で諸々をやってくれる
  - 本テーマでは、`dialog` 要素を使用する
- 実際に `dialog` を用いて、制御を試みる

##### B315：`ly_dialog` (2)

- 前項で作成した `dialog` を用いて、スタイリングを施していく
- 展開ボタンの作成
  - インラインSVGを用いたラベル付きアイコンの形式に
  - 後の `bl_header` に絡む話だが、サイズは `px` を使用する
- デフォルトのスタイルを上書きして画面いっぱいにメニューを展開できるように

##### B315：`ly_dialog` (3)

- スタイル規程で残った、メニューのヘッダー部を作成する

##### B316：`js_pageTop` (1)

- 画面左下に固定表示される「ページトップに戻る」ボタン
- ここでは JavaScript を除いた、HTMLとCSSを作成
- フォントサイズの変更に影響しないよう、サイズや位置の単位は `px` 使用
- スクロール状況による表示/非表示の切り替え
  - JavaScript で `hidden` 属性を制御することを想定したスタイリング
  - `@keyframe` を使ったアニメーション制御

##### B316：`js_pageTop` (2)

- 前項で作成した要素に対し、JavaScriptで機能を実装していく
- スクロール機能とフォーカス機能をセットで用いる
- スクロール量の判定をし、`hidden` 属性をつけ外しする

##### B317：`wp_blockContents`

- WordPress 専用のモジュールで、ブロックエディタに対応したコンテンツのスタイリングを行う
- ただし本項は暫定的なものであり、完全に対応できていない状態
- とりあえず見出し要素のみのスタイリングに留まっている

:::

:::details 第四節：ページ

#### B400：概要 ページ

##### B401：フロントページ(1) 準備

- ページ作成までの大まかな流れについて
- フォルダやファイルの構築
- `index.html` 内の土台となる部分の構築
  - ファイル関係の読み込み
  - レイアウトの設定

##### B401：フロントページ(2) カード群

- メインコンテンツを構成するカード群について

##### B401：フロントページ(3) ヘッダー

- `ly_mainArea_header` の構成と役割
- `bl_header` の作成

##### B401：フロントページ(4) サイドバー＋ダイアログ

- WordPressとの関係
  - カスタムメニュー
  - 各種アーカイブ生成機能
  - テンプレートパーツ
- WordPress側での最終的な構成イメージ
- ダイアログメニューは、左右サイドバーの代替としての役割
- 上記を考慮した静的ページの構成

##### B401：フロントページ(5) フッター

- `ly_footer`を使ったレイアウト構成
- 各ウィジェットの構成
- ウィジェットで使う小道具の作成
  - `ly_footer_headerTitle`
  - `el_memo`
  - `bl_address`
  - `el_copyright`

##### B401：フロントページ(6) その他

- 残りの要素をどこに配置するか
  - ブロックスキップ
  - ページトップに戻るボタン
  - 開発ツール
- 残りの要素を盛り込み、フロントページが完成

##### B402：404ページ

- `index.html` を流用して `404.html` を作成
- フロントページとそれ以外との差異について
- 差異の箇所を修正
  - 左サイドバー＋メインコンテンツのレイアウト
  - メインコンテンツの中身
  - 見出し要素 `h1` の構成

##### B403：固定ページ

- `404.html` を流用して `page.html` を作成
- メインコンテンツの作成
  - 記事タイトル
  - 記事本文

##### B404：投稿ページ

- `page.html` を流用して `single.html` を作成
- 固定ページに無い要素を盛り込む
  - ブロックスキップ
    - 記事本文までにコンテンツが詰まっている故の対処
  - 記事補足情報欄
  - サムネイル画像

##### B405：アーカイブページ

- `404.html` を流用して `archive.html` を作成
- メインコンテンツの各種要素を作成
  - アーカイブタイトル
  - カード群
  - ページネーション

##### B406：検索ページ

- `archive.html` を流用して `search.html` を作成
- アーカイブページにない要素を盛り込む
  - 検索フォーム
  - その他（見出しやテキストなど）

:::

### 第三章：WordPress

ここでは、第二章で作成したベースから WordPress テーマのデータを作る際の話をしていきます。  
前章で使った言語に加え、新たに `PHP` が入ってきます。

:::details 概要

#### C000：第三章概要

:::

### 附則

ここでは、これまでの章で扱っていない部分を補足として話しています。  
複数の考えがあるものに対する自身の考えなど、個人的な性質が強いメモ的なものを主に扱っています。

:::details 概要

#### Z000：附則概要

:::
