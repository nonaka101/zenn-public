---
title: "📄B103：PRECSS関連のルール"
---

## このページについて

前項で簡単に説明した `PRECSS` について、それを参考にしたルールをこの項では説明していきます。

## 前回のおさらい `PRECSS` とは？

`PRECSS`(Prefix CSS) とはCSS設計思想の１つで、下記のような特徴を持っています。

- 種類に応じた接頭辞をつける（JavaScript等のプログラム用や、特定ページにのみ使用が限定されているものなども）
- クラスなどの命名には、スネークケースとキャメルケースを一定の規則に基づき使い分ける
- BEM に比べ、ベーススタイルの扱いや、モジュール内のネストに許容的
- モジュール自体は広く使い回せるようにし、一部特殊な扱いが必要なケースはモディファイアやヘルパークラスで対応

具体的な内容については、公式ページや書籍等で取り扱われていますので、そちらをご参照ください。

https://precss.io/ja/

https://gihyo.jp/book/2020/978-4-297-11173-1

## 本テーマにおける `PRECSS` 関連のルール

ここからは、`PRECSS` 関連のルールを説明していきます。前項で提示したルールから抜粋したものが、下記となります。

- クラス名には、`el_`, `bl_`, `ly_` 等の接頭辞をつける
  - 接頭辞に応じて、役割の異なるグループを構成する（基本的には `PRECSS` 準拠）
  - `el_`: エレメントモジュール、１つの部品が単一の要素で構成されるもの
  - `bl_`: ブロックモジュール、１つの部品が複数要素で構成されるもの
  - `ly_`: レイアウト、モジュール等のコンテンツを内包する 大枠となるもの
  - `js_`: JavaScript用、操作要素を想定
  - `is_`: JavaScript用、条件式に使用する想定
  - `wp_`: WordPress用、現段階ではブロックエディタで作成されたコンテンツ用となる
- ベースとなるクラスは `接頭辞_部品名` の形とする
  - 複数単語の場合、命名規則としてローワーキャメルケースを用いる
- ベースクラスの子要素は `接頭辞_部品名_子要素名` の形とする
- 上位要素と下位要素との責任関係を明確にするよう心がける
  - 上位の要素は、下位要素のレイアウト（例：`margin`, `padding`）を規定する
  - 下位の要素は、自身の（レイアウト以外の）スタイルを規定する
- 特定の場面でのみ振る舞いを変えるようなケースは、モディファイアを用いる
  - モディファイアはクラス名末尾に `__モディファイア名` の形とする
  - 詳細度を高めるため `.el_sample.el_sample__modifier{...}` の複合セレクタを使用する

### クラス名には、`el_`, `bl_`, `ly_` 等の接頭辞をつける

各種クラスには、種類に応じていくつかの接頭辞がつきます。ですので、役割に応じてグループ分けしやすいのが特徴です。

その際には、サイトを部品（コンポーネント）単位に分解し、下記の事項で判定します

|内容|分類|接頭辞|
|:---|:---|---|
|**単一の要素**で構成される|エレメントモジュール|`el_`|
|**複数の要素**がまとまり１つの部品を構成している|ブロックモジュール|`bl_`|
|ヘッダーなど**大きなレイアウト**を構成している|レイアウト|`ly_`|
|**JavaScript用**の要素|プログラムモジュール|`js_`, `is_`|
|（WordPressのブロックエディタ系）|WordPress用モジュール|`wp_`|

#### エレメントモジュール（`el_*`）

部品単位に分解した要素が、単一の要素で構成されていれば、それはエレメントモジュールとなります。例えば **見出し**は、下記のように１つの要素で構成されています。

```html:見出しのサンプル
<h2>Heading Title</h2>
```

これに対し、色や大きさといったスタイルを適用するのが、エレメントモジュールです。こうした要素に設定するクラス名は、その頭に *element* を表す `el_` をつけます。

```html:単一要素をエレメントとみなしクラス付け
<h2 class="el_heading">スタイリングされた見出し</h2>
<!-- アンダーバー以降、heading と続いているのについては後述します -->
```

単一要素で構成されることが多いものとして、他にはボタンや画像が挙げられます。そうした場合も、エレメントモジュールを使います。

```html:他のエレメントモジュール例
<button type="button" class="el_btn">ボタン</button>

<img href="*" class="el_thumbnail" aria-label="サムネイル画像の説明文">
```

ここでは、**単一要素で構成させるコンポーネント**はエレメントモジュールであり、その際のクラス名に `el_` の接頭辞をつける、ということを抑えておいてください。

本テーマでは、下記の要素などに使用されています。

- ボタン
- 見出し
- リンク
- サムネイル

#### ブロックモジュール（`bl_*`）

エレメントモジュールが単体要素に対し、ブロックモジュールはコンポーネントが複数の要素で構成されている場合に当てはまります。

例として、カード（サムネイル、タイトル、要旨で構成）を想定してみます。この場合の `html` 文は下記のようになります。

```html:例：カードの構成
<article>
  <img href="サムネイル画像のパス">
  <h2>タイトル</h2>
  <p>記事の要旨</p>
</article>
```

これを１つのコンポーネントとして考えます。ベースとなる `article` 要素に、*block* を表す接頭辞 `bl_` と、部品名 `card` をつけクラス付けします。

```html:ベースクラスの設定
<article class="bl_card">
  <img href="サムネイル画像のパス">
  <h2>タイトル</h2>
  <p>記事の要旨</p>
</article>
```

次はこの子要素です。カード内の「サムネイル」「タイトル」「要旨」のスタイルは、カード内でのみ使うことを想定しています。カード用サムネイル画像のスタイルを、カード外のところで使うことはありません。

なので、後述しますがこれらのクラスも `bl_card` というベース名を使います。そのうえで、それぞれの粒度でスタイル設定していきます。

```html:例：ブロックモジュール化したカード
<article class="bl_card">
  <img class="bl_card_thumbnail" href="サムネイル画像のパス">
  <h2 class="bl_card_title">タイトル</h2>
  <p class="bl_card_content">記事の要旨</p>
</article>
```

子要素等の命名規則は後述します。ここでは、**複数要素で構成されるコンポーネント**はブロックモジュールであり、その際のクラス名に `bl_` の接頭辞をつける、ということを抑えておいてください。

本テーマでは、下記の要素などに使用されています。

- ヘッダー（内部）
- メニューヘッダー（ダイアログ内）
- アドレス
- アコーディオン
- ブロックスキップ
- カード
- ページネーション
- 投稿データの補足情報
- 検索フォーム
- メニューリスト

#### レイアウト（`ly_*`）

レイアウトは、ヘッダー、メインエリア、サイドエリア、フッターなど大きなレイアウトを形成する要素を指します。本テーマでは、下記の要素に使用されています。

- メインエリア
  - ヘッダー
  - サイドバー
  - コンテンツ
- フッター
- メニューダイアログ

#### プログラムモジュール（`js_*`, `is_*`）

JavaScript で使用する要素には、専用の接頭辞を使います。

- `is_*` : Javascript用（条件分岐などで使用することを想定）
- `js_*` : Javascript用（ボタン等の操作要素に使用することを想定）

#### WordPress用モジュール（`wp_*`）

この接頭辞は `PRECSS` 本家にない、テーマ独自のものになります。ワードプレス用に作ったものであり、現在はブロックエディタで作成したデータ用に使用しているだけとなっております。

### ベースとなるクラスは `接頭辞_部品名` の形

ここまで見てきた各種接頭辞と、部品を表す名前を組み合わせることで、クラス名を生成します。例えば「見出し（エレメントモジュール）」なら `el_heading`、「カード（ブロックモジュール）」なら `bl_card` といった具合です。

では、検索フォーム（search form）のブロックモジュールの場合はどうでしょうか？

複数単語で１つの部品名となる場合には、ローワーキャメルケースで１つに繋げます。なので先程の問の場合は、`bl_searchForm` となります。

### ベースクラスの子要素は `接頭辞_部品名_子要素名` の形とする

前半に出てきた例を持ってきました、カードコンポーネントのクラス付けのサンプル文です。

```html:ブロックモジュールのカードコンポーネント
<article class="bl_card">
  <img class="bl_card_thumbnail" href="サムネイル画像のパス">
  <h2 class="bl_card_title">タイトル</h2>
  <p class="bl_card_content">記事の要旨</p>
</article>
```

このように、「*接頭辞*_*部品名*」（上記の場合だと `bl_card`）がベースとなっています。そして子要素は、**その後ろにアンダーバーで続ける**ようになっています。

では、こうなった場合はどうでしょう？

```html:カードに所属するタグ一覧を付与
<article class="bl_card">
  <img class="bl_card_thumbnail" href="サムネイル画像のパス">
  <h2 class="bl_card_title">タイトル</h2>
  <p class="bl_card_content">記事の要旨</p>
  <ul class="bl_card_list">
    <li>アイテムA</li>
    <li>アイテムB</li>
    <li>アイテムC</li>
  </ul>
</article>
```

この場合の `li` 要素に `item` という子部品名をつけるとしたとき、クラス名は下記のどちらでしょうか？

- `bl_card_list_item`
- `bl_card_item`

基本的には後者になります。子要素が重なるに連れてどんどんアンダーバーで繋がるようなことにはなりません。それはクラス名が冗長になりがちで、見づらくなってしまうためです。  

:::message

事情によってはアンダーバーでつなげる場合もあります。

例えば「同じ、または似た子要素名を既に使っていて区別が難しくなる」場合です。この場合は、子要素に更に子要素名が続くことを許容します。

:::

ですので、最終的にはこうなります。

```html:カードに所属するタグ一覧を付与
<article class="bl_card">
  <img class="bl_card_thumbnail" href="サムネイル画像のパス">
  <h2 class="bl_card_title">タイトル</h2>
  <p class="bl_card_content">記事の要旨</p>
  <ul class="bl_card_list">
    <li class="bl_card_item">アイテムA</li>
    <li class="bl_card_item">アイテムB</li>
    <li class="bl_card_item">アイテムC</li>
  </ul>
</article>
```

### 上位要素と下位要素との責任関係を明確にするよう心がける

先程の例をもう一度見てみましょう。

```html:カードに所属するタグ一覧を付与
<article class="bl_card">
  <img class="bl_card_thumbnail" href="サムネイル画像のパス">
  <h2 class="bl_card_title">タイトル</h2>
  <p class="bl_card_content">記事の要旨</p>
  <ul class="bl_card_list">
    <li class="bl_card_item">アイテムA</li>
    <li class="bl_card_item">アイテムB</li>
    <li class="bl_card_item">アイテムC</li>
  </ul>
</article>
```

この場合の `bl_card` で規定するスタイルは何でしょうか？ また、`bl_card_item` で規定するスタイルとは何でしょうか？

基本的に、上位の要素は下位の要素に対するレイアウトを規定するのが原則です。言い換えると、下位の要素が自身の上位にある要素や、自身と同等である周辺要素のレイアウトに対して、影響を及ぼしてはなりません。  
（※ 本家にあるように、上下の `margin` や `padding` は許容されます）

今回の場合、`bl_card` は例えば下記の行動が取れます

- 自身の `padding` で、子要素の余白を取る
- 「サムネイル」「タイトル」「要旨」の並び `flex-flow: column nowrap;`

一方で、下記の行動は取れません。これらは該当する下位の要素で規定されるべきものです。

- 「タイトル」や「要旨」のフォントサイズ
- リスト要素の並びやマーカーといったリストスタイル

原則として、上下の役割をこのように規定しています。本テーマ内には、ある理由からこれに従っていないものも見受けられますが、そこはご了承ください。

### 特定の場面でのみ振る舞いを変えるようなケースは、モディファイアを用いる

これまで説明してきたモジュールは、様々な場面で使い回すことを前提にしています。一方で、特定の箇所で他と違ったスタイル（あしらい、大きさや色、振る舞い など）を使用したい場面も出てくるでしょう。

そうした場合には、**モディファイア（Modifier:修飾子）**を使用します。

モディファイアは 使用するクラス名の後ろに、アンダーバー２つ と モディファイア名 を付与します。  
例として、一般的なテキスト用クラス `el_text` に対し、警告用のスタイルを追加したいとします。この場合、モディファイアを `el_text__warning` とし、下記のように詳細度を高めてスタイルを上書きします。

```css:例
/* 【ベースクラス】 */
.el_text {
  /* ここでは汎用的なテキストのスタイルを記載 */
  color: black;
  font-size: 1rem;
  line-height: 1.5;
  text-decoration: none;
}

/* 【モディファイア】
 * ベースクラスとモディファイアは同一要素に重ねる想定。
 * こうすることで、ベーススタイルは受け継ぎつつ、 
 * 警告用のスタイルを詳細度を高めることで上書きしている。
 */
.el_text.el_text__warning {
  color: red;
}
```

`html` で使用する場合には、クラスと同じ要素内でモディファイアを使用します。

```html:例
<p class="el_text">一般的なテキスト（黒色）</p>
<p class="el_text el_text__warning">警告用テキスト（赤色）</p>
```

## まとめ

本項では、`PRECSS` に関連したルールについて説明しました。

次項では、本テーマの特徴の１つである「色」に関するスタイルについて説明していきます。
