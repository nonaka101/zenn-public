---
title: "📁コード"
---

## 本章について

本章では、[前章](./200__architecture)の内容を基にコードを作成していきます。

### 📄コード：スケッチの用意

「[📄コード：スケッチの用意](./310__prepare-sketch)」では、コード作成の第一段階となる諸々の準備を行います。

- 新規スケッチの作成
- 使用するライブラリの定義
- 各種設定項目を準備

### 📄コード：コントローラーとの通信確立

「[📄コード：コントローラーとの通信確立](./320__handshake)」では、接続先となるコントローラとの通信初期化を行います。

- 通信初期化（ハンドシェイク）について
- 通信を監視し、状態を管理する
- 通信初期化関数 `initializeNunchuk()` の作成

### 📄コード：コントローラーからデータを読み取る

「[📄コード：コントローラーからデータを読み取る](./330__read-nunchuk)」では、通信を確立させたコントローラーから入力情報を取得します。

- 入力情報取得関数 `readNunchuk()` の作成
- 取得したデータの内訳について
- 入力情報を管理する構造体 `NunchukInput` の定義
- 情報取得失敗時の対処

### 📄コード：加速度の平滑化

「[📄コード：加速度の平滑化](./340__smooth-acceleration)」では、扱いの難しい加速度情報を平滑化します。

- 加速度情報（生データ）の問題点
- 平滑化処理について
- 平滑化加速度を扱う構造体 `SmoothedAccelermeter` の定義
- 平滑化関数 `smoothAccelerometer()` の作成

### 📄コード：向きの計算

「[📄コード：向きの計算](./350__calculate-angle)」では、加速度情報からデバイス向きを算出します。

- 加速度情報から様々な計算を行う
- 空間ベクトルの為す角
- 角度算出関数 `angleBetweenTwoVectors()` の作成
- デバイス向きの算出について
- モード判定関数 `determineOperationMode()` の作成

### 📄コード：マウス操作の管理

「[📄コード：マウス操作の管理](./360__struct-mouse-control)」では、マウス操作を管理する方法について考えます。

- マウス操作に必要となるデータについて
  - 状態管理が必要となるマウスボタン操作について
  - ショートカットボタンの管理について
- マウス操作を管理する構造体 `MouseControl` の定義

### 📄コード：マウス操作情報の更新

「[📄コード：マウス操作情報の更新](./370__update-mouse)」では、構造体 `MouseControl` に各種データを格納していきます。

- マウス操作情報の更新関数 `updateMouse()` を作成
  - モード更新用のイベント関数 `onSwitchMode()` の作成
  - 指示セット追加関数 `addMouseAction()` の作成

### 📄コード：デバッグ用の出力

「[📄コード：デバッグ用の出力](./380__print-debug-info)」では、ここまでで入手した各種データをモニタ上に出力できるようにします。

- これまで作成した各種構造体の確認
- デバッグ用関数 `printDebugInfo()` の作成

### 📄コード：マウス操作の反映

「[📄コード：マウス操作の反映](./390__send-mouse-events)」では、これまで入手した各種データを使って、マウス操作として反映します。

- マウス操作反映の関数 `sendMouseEvents()` の作成
